import asyncio
import logging
import random
import string
import re
from datetime import datetime

from aiogram import Bot, Dispatcher, types
from aiogram.filters import CommandStart
from aiogram.types import (
    InlineKeyboardMarkup, InlineKeyboardButton,
    Message, CallbackQuery,
    LabeledPrice, PreCheckoutQuery, SuccessfulPayment
)
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup
from aiogram.fsm.storage.memory import MemoryStorage
from dotenv import load_dotenv
import os

from aiohttp import web
from aiogram.webhook.aiohttp_server import SimpleRequestHandler, setup_application

# –ò–º–ø–æ—Ä—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
from aiogram_calendar import SimpleCalendar, SimpleCalendarCallback

load_dotenv()

# ==================== –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø ====================
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# ==================== ID –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê ====================
ADMIN_ID = 217336060  # –í–∞—à ID

# ==================== –ü–†–û–í–ï–†–ö–ê –ü–ï–†–ï–ú–ï–ù–ù–´–• ====================
BOT_TOKEN = os.getenv("BOT_TOKEN")
if not BOT_TOKEN:
    raise ValueError("‚ùå BOT_TOKEN –Ω–µ –∑–∞–¥–∞–Ω! –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ Railway.")

PAYMENTS_TOKEN = os.getenv("PAYMENTS_PROVIDER_TOKEN")
if not PAYMENTS_TOKEN:
    logger.warning("‚ö†Ô∏è PAYMENTS_PROVIDER_TOKEN –Ω–µ –∑–∞–¥–∞–Ω. –û–ø–ª–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç!")

# ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–û–¢–ê ====================
bot = Bot(token=BOT_TOKEN)
storage = MemoryStorage()
dp = Dispatcher(storage=storage)

# ==================== –°–û–°–¢–û–Ø–ù–ò–Ø FSM ====================
class Form(StatesGroup):
    # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    consent = State()
    question = State()
    branch_tie = State()
    final = State()
    
    # –ó–∞–ø–∏—Å—å –∏ –æ–ø–ª–∞—Ç–∞ (–≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
    waiting_for_name = State()
    waiting_for_phone = State()
    waiting_for_date = State()
    waiting_for_time = State()
    waiting_for_payment = State()
    waiting_for_report_option = State()
    waiting_for_email = State()
    
# ==================== –î–ê–ù–ù–´–ï ====================
PROGRAMS = [
    "–í–µ—á–Ω–∞—è –ø—É—Å—Ç–æ—Ç–∞",
    "–ú–µ–Ω—è –æ—Å—Ç–∞–≤—è—Ç",
    "–•—Ä—É–ø–∫–æ—Å—Ç—å",
    "–ñ–µ—Ä—Ç–≤–∞ —Ä–∞–¥–∏ –¥—Ä—É–≥–∏—Ö",
    "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—Ä–∏—Ç–∏–∫",
    "–ù–∏–∫–æ–º—É –Ω–µ –≤–µ—Ä—é",
    "–ù–µ –¥–æ—Ç—è–≥–∏–≤–∞—é",
    "–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å",
    "–ñ–∞–∂–¥–∞ –ø–æ—Ö–≤–∞–ª—ã",
    "–Ø –¥–ª—è –≤—Å–µ—Ö",
    "–ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞",
    "–°–∞–±–æ—Ç–∞–∂ —É—Å–ø–µ—Ö–∞",
    "–ù–µ –º–æ–≥—É —Å–µ–±—è –∑–∞—Å—Ç–∞–≤–∏—Ç—å",
    "–ù–∏–∫—Ç–æ –Ω–µ –Ω—É–∂–µ–Ω",
    "–í—Å—ë –ø–ª–æ—Ö–æ",
    "–Ø - —ç—Ç–æ —Ç—ã",
    "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—É–¥—å—è",
    "–Ø –ª—É—á—à–µ/—Ö—É–∂–µ –≤—Å–µ—Ö",
]

# –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ –≤–µ—Ç–∫–∞–º
BRANCH_A = [1, 5, 13, 7]  # –ú–µ–Ω—è –æ—Å—Ç–∞–≤—è—Ç, –ù–∏–∫–æ–º—É –Ω–µ –≤–µ—Ä—é, –ù–∏–∫—Ç–æ –Ω–µ –Ω—É–∂–µ–Ω, –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
BRANCH_B = [0, 6, 2, 8, 9]  # –í–µ—á–Ω–∞—è –ø—É—Å—Ç–æ—Ç–∞, –ù–µ –¥–æ—Ç—è–≥–∏–≤–∞—é, –•—Ä—É–ø–∫–æ—Å—Ç—å, –ñ–∞–∂–¥–∞ –ø–æ—Ö–≤–∞–ª—ã, –Ø –¥–ª—è –≤—Å–µ—Ö
BRANCH_C = [4, 16, 10, 17, 12]  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—Ä–∏—Ç–∏–∫, –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—É–¥—å—è, –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞, –Ø –ª—É—á—à–µ/—Ö—É–∂–µ –≤—Å–µ—Ö, –ù–µ –º–æ–≥—É —Å–µ–±—è –∑–∞—Å—Ç–∞–≤–∏—Ç—å
BRANCH_D = [3, 11, 14, 15]  # –ñ–µ—Ä—Ç–≤–∞ —Ä–∞–¥–∏ –¥—Ä—É–≥–∏—Ö, –°–∞–±–æ—Ç–∞–∂ —É—Å–ø–µ—Ö–∞, –í—Å—ë –ø–ª–æ—Ö–æ, –Ø - —ç—Ç–æ —Ç—ã

# ==================== –í–û–ü–†–û–°–´ ====================

# –ü–µ—Ä–≤—ã–µ 10 –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
FIRST_STAGE_QUESTIONS = [
    "–ö–æ–≥–¥–∞ –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫ –¥–æ–ª–≥–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî —è —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å, —á—Ç–æ –æ–Ω –∫–æ –º–Ω–µ –æ—Ö–ª–∞–¥–µ–ª –∏–ª–∏ –Ω–∞—à—ë–ª –∫–æ–≥–æ-—Ç–æ –ª—É—á—à–µ.",
    "–ë—ã–≤–∞–µ—Ç, —á—Ç–æ –≤–Ω–µ—à–Ω–µ –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî –ø—É—Å—Ç–æ –∏ –≥—Ä—É—Å—Ç–Ω–æ, –∫–∞–∫ –±—É–¥—Ç–æ —á–µ–≥–æ-—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç.",
    "–ï—Å–ª–∏ –º–µ–Ω—è –¥–æ–ª–≥–æ –Ω–µ —Ö–≤–∞–ª—è—Ç, –Ω–µ –∑–∞–º–µ—á–∞—é—Ç –∏–ª–∏ –Ω–µ –±–ª–∞–≥–æ–¥–∞—Ä—è—Ç ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–µ–∑–∫–æ –ø–∞–¥–∞–µ—Ç, —Ö–æ—Ç—è –≤—Ä–æ–¥–µ –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ.",
    "–î–∞–∂–µ –ø–æ—Å–ª–µ —Ö–æ—Ä–æ—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —è –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏: ¬´–º–æ–∂–Ω–æ –±—ã–ª–æ —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ¬ª –∏ —Ä—É–≥–∞—é —Å–µ–±—è.",
    "–ö–æ–≥–¥–∞ —è —Å–∞–∂—É—Å—å –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º ‚Äî —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –Ω–∞—á–∏–Ω–∞—é –¥—É–º–∞—Ç—å: ¬´–º–æ–∂–µ—Ç, –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ¬ª.",
    "–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–∏—Ç—É–∞—Ü–∏–π —è –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –∑–∞–º–µ—á–∞—é, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫.",
    "–ö–æ–≥–¥–∞ –º–µ–Ω—è –ø—Ä–æ—Å—è—Ç –æ –ø–æ–º–æ—â–∏ ‚Äî —è —Å–æ–≥–ª–∞—à–∞—é—Å—å, –¥–∞–∂–µ –µ—Å–ª–∏ —É –º–µ–Ω—è –±—ã–ª–∏ —Å–≤–æ–∏ –ø–ª–∞–Ω—ã, –∞ –ø–æ—Ç–æ–º —Å–∏–∂—É –∏ –¥—É–º–∞—é: ¬´–∑–∞—á–µ–º —è –æ–ø—è—Ç—å —Å–æ–≥–ª–∞—Å–∏–ª—Å—è(–∞—Å—å)?¬ª",
    "–ö–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —á—ë–º-—Ç–æ –ª–∏—á–Ω–æ–º –∏–ª–∏ –Ω–∞–±–æ–ª–µ–≤—à–µ–º ‚Äî —è –≤–¥—Ä—É–≥ –Ω–∞—á–∏–Ω–∞—é –≥–æ–≤–æ—Ä–∏—Ç—å: ¬´–¥–∞ –≤—Å—ë –Ω–æ—Ä–º–∞–ª—å–Ω–æ¬ª, —Ö–æ—Ç—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.",
    "–î–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å—ë –∏–¥—ë—Ç —Ö–æ—Ä–æ—à–æ ‚Äî —è —á–∞—Å—Ç–æ –¥—É–º–∞—é: ¬´—ç—Ç–æ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ, —Å–∫–æ—Ä–æ –æ–ø—è—Ç—å –≤—Å—ë –∏—Å–ø–æ—Ä—Ç–∏—Ç—Å—è¬ª.",
    "–Ø —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—é ¬´–¥–∞¬ª –∏–ª–∏ —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å –¥—Ä—É–≥–∏–º–∏, —Ö–æ—Ç—è –≤–Ω—É—Ç—Ä–∏ —Ö–æ—á–µ—Ç—Å—è —Å–∫–∞–∑–∞—Ç—å ¬´–Ω–µ—Ç¬ª –∏–ª–∏ –ø–æ—Å–ø–æ—Ä–∏—Ç—å."
]

# –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ç–∫–∏ A (–°—Ç—Ä–∞—Ö –ø–æ—Ç–µ—Ä–∏ –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ)
BRANCH_A_QUESTIONS = [
    "–ö–æ–≥–¥–∞ –ø–∞—Ä—Ç–Ω—ë—Ä –∏–ª–∏ –¥—Ä—É–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á—É—Ç—å —Ö–æ–ª–æ–¥–Ω–µ–µ –∏–ª–∏ –∑–∞–Ω—è—Ç ‚Äî —è –Ω–∞—á–∏–Ω–∞—é –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–∞—à—É –ø–µ—Ä–µ–ø–∏—Å–∫—É, –∏—Å–∫–∞—Ç—å, –≥–¥–µ –º–æ–≥(–ª–∞) –æ—à–∏–±–∏—Ç—å—Å—è, –∏ –±–æ—é—Å—å –Ω–∞–ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–º.",
    "–ö–æ–≥–¥–∞ –º–Ω–µ –≥–æ–≤–æ—Ä—è—Ç —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ –∏–ª–∏ –¥–µ–ª–∞—é—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç ‚Äî –≤ –≥–æ–ª–æ–≤–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –º—ã—Å–ª—å: ¬´–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∞ —á—Ç–æ –µ–º—É/–µ–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ—Ç –º–µ–Ω—è –Ω—É–∂–Ω–æ?¬ª",
    "–ï—Å–ª–∏ —è –∑–∞–º–µ—á–∞—é, —á—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–Ω–µ –¥–æ—Ä–æ–≥, —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –≤—Ä–µ–º—è –±–µ–∑ –º–µ–Ω—è ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—Å—Ç—Ä–∞—è –±–æ–ª—å –∏ —Å—Ç—Ä–∞—Ö, —á—Ç–æ –º–µ–Ω—è –∑–∞–º–µ–Ω—è—Ç.",
    "–Ø –æ—Å—Ç–∞—é—Å—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–≤–Ω–æ –ø—Ä–∏–Ω–æ—Å—è—Ç –±–æ–ª—å—à–µ –±–æ–ª–∏, —á–µ–º —Ä–∞–¥–æ—Å—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã—Å–ª—å –æ–± –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ —Å—Ç—Ä–∞—à–Ω–µ–µ –ª—é–±—ã—Ö —Å—Å–æ—Ä.",
    "–ö–æ–≥–¥–∞ —è –æ—Å—Ç–∞—é—Å—å –æ–¥–∏–Ω(–Ω–∞) –Ω–∞–¥–æ–ª–≥–æ ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥—Ä—É—Å—Ç—å, –∞ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —è –Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω(–Ω–∞) –∏ –º–µ–Ω—è –∑–∞–±—ã–ª–∏.",
    "–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –æ —á—ë–º-—Ç–æ –∏–ª–∏ –æ—Ç–∫–∞–∑–∞—Ç—å ‚Äî —è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é –≤ –≥–æ–ª–æ–≤–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞ –∏ —á–∞—Å—Ç–æ –æ—Ç–∫–∞–∑—ã–≤–∞—é—Å—å –æ—Ç —Å–≤–æ–∏—Ö –∂–µ–ª–∞–Ω–∏–π, —á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è."
]

# –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ç–∫–∏ B (–°—Ç—ã–¥ –∏ –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å)
BRANCH_B_QUESTIONS = [
    "–í –∫–æ–º–ø–∞–Ω–∏–∏ –∏–ª–∏ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö —á–∞—Å—Ç–æ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏: ¬´–æ–Ω–∏ –≤—Å–µ –∫—Ä—É—á–µ/–∫—Ä–∞—Å–∏–≤–µ–µ/—É—Å–ø–µ—à–Ω–µ–µ –º–µ–Ω—è¬ª.",
    "–ö–æ–≥–¥–∞ –º–µ–Ω—è —Ö–≤–∞–ª—è—Ç ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª—ë–≥–∫–∏–π —Å—Ç—ã–¥ –∏ –º—ã—Å–ª—å: ¬´–æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–Ω–∞—é—Ç, –∫–∞–∫–æ–π —è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ¬ª.",
    "–õ—é–±–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ –∏–ª–∏ –∫—Ä–∏—Ç–∏–∫–∞ ‚Äî –¥–∞–∂–µ –º–µ–ª–∫–∞—è ‚Äî —Ä–∞–Ω–∏—Ç –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∏ —Å–∏–¥–∏—Ç –≤ –≥–æ–ª–æ–≤–µ –¥–æ–ª–≥–æ.",
    "–Ø —á–∞—Å—Ç–æ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ —Ç–æ–º, —á—Ç–æ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –ø–æ–¥ –ª—é–¥–µ–π, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –±—ã—Ç—å —Å–æ–±–æ–π ‚Äî –ª–∏—à—å –±—ã –Ω–∏–∫—Ç–æ –Ω–µ –æ–±–∏–¥–µ–ª—Å—è.",
    "–ë—ã–≤–∞–µ—Ç, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤—Å—ë –±–æ–ª–∏—Ç –∏ —Ö–æ—á–µ—Ç—Å—è –≤—ã–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è, –Ω–æ –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç ¬´–∫–∞–∫ –¥–µ–ª–∞?¬ª ‚Äî —è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ª—ã–±–∞—é—Å—å –∏ –≥–æ–≤–æ—Ä—é: ¬´–≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ¬ª.",
    "–í –≥–ª—É–±–∏–Ω–µ –¥—É—à–∏ —è —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —É –≤—Å–µ—Ö –ª—é–¥–µ–π –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –≤–∞–∂–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ –∂–∏–∑–Ω–∏, –∞ –º–Ω–µ –µ–≥–æ –Ω–µ –≤—ã–¥–∞–ª–∏."
]

# –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ç–∫–∏ C (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞)
BRANCH_C_QUESTIONS = [
    "–í–µ—á–µ—Ä–æ–º, –ª—ë–∂–∞ –≤ –∫—Ä–æ–≤–∞—Ç–∏, —è —á–∞—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é –ø—Ä–æ—à–µ–¥—à–∏–π –¥–µ–Ω—å –∏ –Ω–∞—Ö–æ–∂—É, –≥–¥–µ —è –º–æ–≥(–ª–∞) –±—ã —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ.",
    "–ö–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥—Å—Ç—É–ø–∞—é—Ç —Å–ª—ë–∑—ã, –≥–Ω–µ–≤ –∏–ª–∏ —Å–∏–ª—å–Ω–∞—è —Ä–∞–¥–æ—Å—Ç—å ‚Äî —è —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ –≤–Ω—É—Ç—Ä–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞: ¬´–Ω–µ–ª—å–∑—è, —ç—Ç–æ —Å–ª–∞–±–æ—Å—Ç—å, –≤–æ–∑—å–º–∏ —Å–µ–±—è –≤ —Ä—É–∫–∏¬ª.",
    "–ï—Å–ª–∏ —è –≤–∏–∂—É, —á—Ç–æ –∫—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ —Ö—É–∂–µ –º–µ–Ω—è ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≥–æ—Ä–¥–æ—Å—Ç—å –∏ —á—É–≤—Å—Ç–≤–æ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—Å—Ç–≤–∞; –µ—Å–ª–∏ –ª—É—á—à–µ ‚Äî —Å—Ä–∞–∑—É –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —è –Ω–∏—á—Ç–æ–∂–µ—Å—Ç–≤–æ.",
    "–Ø —á–∞—Å—Ç–æ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ —Ç–æ–º, —á—Ç–æ —Å—Ç–∞–≤–ª—é —Å–µ–±–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ, –∞ –ø–æ—Ç–æ–º —Ä—É–≥–∞—é —Å–µ–±—è –∑–∞ —Ç–æ, —á—Ç–æ ¬´–Ω–µ –¥–æ—Ç—è–Ω—É–ª¬ª.",
    "–ö–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –∏–ª–∏ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ—Å—Ç—å ‚Äî —è –º—ã—Å–ª–µ–Ω–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é —Å–∏—Ç—É–∞—Ü–∏—é –¥–µ—Å—è—Ç–∫–∏ —Ä–∞–∑ –∏ –¥—É–º–∞—é: ¬´–∫–∞–∫ –Ω–∞–¥–æ –±—ã–ª–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ¬ª.",
    "–ú–Ω–µ –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ –ª–µ—á—å —Å–ø–∞—Ç—å, –µ—Å–ª–∏ —è –Ω–µ —Å–¥–µ–ª–∞–ª(–∞) –≤—Å—ë, —á—Ç–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª(–∞), –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ —É–∂–µ –Ω–µ–≤–∞–∂–Ω–æ –∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏."
]

# –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ç–∫–∏ D (–ñ–µ—Ä—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —Å–∞–±–æ—Ç–∞–∂ –∏ –∏–∑–±–µ–≥–∞–Ω–∏–µ)
BRANCH_D_QUESTIONS = [
    "–ö–æ–≥–¥–∞ –º–µ–Ω—è –ø—Ä–æ—Å—è—Ç –æ –ø–æ–º–æ—â–∏, –∞ —è —É—Å—Ç–∞–ª(–∞) –∏–ª–∏ –∑–∞–Ω—è—Ç(–∞) ‚Äî —è –≤—Å—ë —Ä–∞–≤–Ω–æ –≥–æ–≤–æ—Ä—é ¬´–¥–∞¬ª, –∞ –ø–æ—Ç–æ–º –¥–æ–ª–≥–æ —Å–µ–±—è —Ä—É–≥–∞—é, —á—Ç–æ –æ–ø—è—Ç—å –Ω–µ –ø–æ–¥—É–º–∞–ª(–∞) –æ —Å–µ–±–µ.",
    "–ö–∞–∫ —Ç–æ–ª—å–∫–æ –¥–µ–ª–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ —Ñ–∏–Ω–∞–ª—É –∏ –≤–æ—Ç-–≤–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å–ø–µ—Ö ‚Äî —É –º–µ–Ω—è –≤–¥—Ä—É–≥ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å, –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ä–æ—á–Ω—ã–µ –¥–µ–ª–∞, –∏ —è –±—Ä–æ—Å–∞—é –≤—Å—ë –Ω–∞ –ø–æ–ª–ø—É—Ç–∏.",
    "–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ –∏–ª–∏ –º–µ–Ω—è –∂–¥—ë—Ç –ø—Ä–∏—è—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ ‚Äî —è —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é –¥—É–º–∞—Ç—å: ¬´–∞ –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫¬ª –∏ –≥–æ—Ç–æ–≤–ª—é—Å—å –∫ —Ö—É–¥—à–µ–º—É.",
    "–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —è —á–∞—Å—Ç–æ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ —Ç–æ–º, —á—Ç–æ —Å–º–æ—Ç—Ä—é —Ç–µ –∂–µ —Ñ–∏–ª—å–º—ã, —á—Ç–æ –∏ –ø–∞—Ä—Ç–Ω—ë—Ä, –µ–º —Ç—É –∂–µ –µ–¥—É, –∏–º–µ—é —Ç–µ –∂–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã ‚Äî –∞ –≥–¥–µ —è —Å–∞–º(–∞)? ‚Äî —É–∂–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ.",
    "–ï—Å–ª–∏ —è –≤—Å—ë-—Ç–∞–∫–∏ –≥–æ–≤–æ—Ä—é ¬´–Ω–µ—Ç¬ª –∏–ª–∏ –≤—ã–±–∏—Ä–∞—é —Å–µ–±—è ‚Äî –≤–Ω—É—Ç—Ä–∏ —Å—Ä–∞–∑—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç—è–∂–µ–ª–æ–µ —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã, –∫–∞–∫ –±—É–¥—Ç–æ —è –ø—Ä–µ–¥–∞–ª(–∞) —á–µ–ª–æ–≤–µ–∫–∞.",
    "–Ø —á–∞—Å—Ç–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é —Å–≤–æ–∏ –º–µ—á—Ç—ã –∏ –≤–∞–∂–Ω—ã–µ –¥–ª—è —Å–µ–±—è –¥–µ–ª–∞ –Ω–∞ –ø–æ—Ç–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ ¬´—Å–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π¬ª."
]

# –í–æ–ø—Ä–æ—Å—ã-—Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª–∏ –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏
BRANCH_TIE_QUESTIONS = {
    "A_B": "–ß—Ç–æ —á–∞—â–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É –≤ —Ç—Ä—É–¥–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã: —Å—Ç—Ä–∞—Ö, —á—Ç–æ –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫ —É–π–¥—ë—Ç/–æ—Ö–ª–∞–¥–µ–µ—Ç, –∏–ª–∏ –º—ã—Å–ª—å ¬´—è —Å–Ω–æ–≤–∞ —Å–¥–µ–ª–∞–ª(–∞) —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, —è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à(–∞)¬ª?",
    "A_C": "–ö–æ–≥–¥–∞ —Ç—ã –æ—Å—Ç–∞—ë—à—å—Å—è –æ–¥–∏–Ω(–Ω–∞) –≤–µ—á–µ—Ä–æ–º ‚Äî —á—Ç–æ —Å–∏–ª—å–Ω–µ–µ –≥–ª–æ–∂–µ—Ç: —Ç—Ä–µ–≤–æ–≥–∞, —á—Ç–æ —Ç–µ–±—è –±—Ä–æ—Å—è—Ç/–æ–±–º–∞–Ω—É—Ç, –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä—É–≥–∞–µ—Ç –∑–∞ –≤—Å—ë –ø–æ–¥—Ä—è–¥?",
    "A_D": "–ö–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ –¥—Ä—É–≥–∏–º ‚Äî —á—Ç–æ –ø–æ–±–µ–∂–¥–∞–µ—Ç: —Å—Ç—Ä–∞—Ö, —á—Ç–æ –æ—Ç–∫–∞–∂—É—Ç—Å—è –æ—Ç —Ç–µ–±—è, –∏–ª–∏ –≤–∏–Ω–∞, –µ—Å–ª–∏ –≤—ã–±–µ—Ä–µ—à—å —Å–µ–±—è?",
    "B_C": "–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á—Ç–æ-—Ç–æ –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ–µ ‚Äî —Ç—ã —á–∞—â–µ –¥—É–º–∞–µ—à—å: ¬´—ç—Ç–æ –ø–æ—Ç–æ–º—É —á—Ç–æ —è –ø–ª–æ—Ö–æ–π(–∞—è)¬ª –∏–ª–∏ ¬´—è –¥–æ–ª–∂–µ–Ω(–Ω–∞) –±—ã–ª(–∞) —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ¬ª?",
    "B_D": "–ß—Ç–æ –±—ã–≤–∞–µ—Ç —á–∞—â–µ: —á—É–≤—Å—Ç–≤–æ, —á—Ç–æ —Ç–µ–±—è –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∏ —Ç—ã –ø—É—Å—Ç–æ–π(–∞—è) –≤–Ω—É—Ç—Ä–∏, –∏–ª–∏ –ø—Ä–∏–≤—ã—á–∫–∞ –ø–æ–º–æ–≥–∞—Ç—å –≤—Å–µ–º –ø–æ–¥—Ä—è–¥, –∞ –ø–æ—Ç–æ–º –ª–µ–∂–∞—Ç—å –∏ –∑–ª–∏—Ç—å—Å—è –Ω–∞ —Å–µ–±—è?",
    "C_D": "–ß—Ç–æ —Ç–µ–±—è –±–æ–ª—å—à–µ –∏–∑–º–∞—Ç—ã–≤–∞–µ—Ç: –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ ¬´–Ω–∞–¥–æ –±—ã—Ç—å –ª—É—á—à–µ¬ª –∏ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞, –∏–ª–∏ –ø—Ä–∏–≤—ã—á–∫–∞ —Å—Ç–∞–≤–∏—Ç—å —á—É–∂–∏–µ –Ω—É–∂–¥—ã –≤—ã—à–µ —Å–≤–æ–∏—Ö, –∞ –ø–æ—Ç–æ–º –æ–±–∏–∂–∞—Ç—å—Å—è –Ω–∞ –≤–µ—Å—å –º–∏—Ä?"
}

# –§–∏–Ω–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
FINAL_QUESTIONS = [
    "–ù–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ —ç—Ç–∏ —á—É–≤—Å—Ç–≤–∞ –∏ –º—ã—Å–ª–∏ —Å–µ–π—á–∞—Å –º–µ—à–∞—é—Ç —Ç–µ–±–µ –∂–∏—Ç—å? (1‚Äì10)",
    "–ö–∞–∫ —á–∞—Å—Ç–æ –æ–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≥–æ–ª–æ–≤—É –≤ –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω–∏?",
    "–í –∫–∞–∫–æ–π —Å—Ñ–µ—Ä–µ –æ–Ω–∏ —Å–µ–π—á–∞—Å –ø—Ä–æ—è–≤–ª—è—é—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ –≤—Å–µ–≥–æ?"
]

FINAL_FREQUENCY_OPTIONS = [
    "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å",
    "–ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é",
    "–í—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏",
    "–†–µ–¥–∫–æ"
]

FINAL_SPHERE_OPTIONS = [
    "–û—Ç–Ω–æ—à–µ–Ω–∏—è",
    "–î–µ–Ω—å–≥–∏ –∏ –∫–∞—Ä—å–µ—Ä–∞",
    "–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞",
    "–ó–¥–æ—Ä–æ–≤—å–µ",
    "–î—Ä—É–≥–æ–µ"
]

# ==================== –û–ü–ò–°–ê–ù–ò–Ø –ü–†–û–ì–†–ê–ú–ú ====================

PROGRAM_DESCRIPTIONS = [
    # 0. –í–µ—á–Ω–∞—è –ø—É—Å—Ç–æ—Ç–∞
    """<b>–≠—Ç–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ ‚Äî –∫–∞–∫ –±—É–¥—Ç–æ –ø—É—Å—Ç–æ—Ç–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤–Ω–µ—à–Ω–µ –≤—Å—ë —Ö–æ—Ä–æ—à–æ.</b>

–¢—ã —Å–ª–æ–≤–Ω–æ —Å—Ç–æ–∏—à—å –∑–∞ —Å—Ç–µ–∫–ª–æ–º –∏ —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –º–∏—Ä: –≤—Å–µ –≤–æ–∫—Ä—É–≥ –∂–∏–≤—É—Ç, —á—É–≤—Å—Ç–≤—É—é—Ç, —Ä–∞–¥—É—é—Ç—Å—è, –∞ —Ç—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞–µ—à—å. –í—Ä–æ–¥–µ –µ—Å—Ç—å –ª—é–¥–∏, —Ä–∞–±–æ—Ç–∞, —Å–æ–±—ã—Ç–∏—è, –∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî —Ç–∏—à–∏–Ω–∞ –∏ —Ö–æ–ª–æ–¥. –ò–Ω–æ–≥–¥–∞ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ —É –¥—Ä—É–≥–∏—Ö –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –∫ –∂–∏–∑–Ω–∏, –∞ —Ç–µ–±–µ –µ–≥–æ –Ω–µ –≤—ã–¥–∞–ª–∏.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç–µ–±–µ —Ç—Ä—É–¥–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –±–ª–∏–∑–æ—Å—Ç—å. –¢—ã –º–æ–∂–µ—à—å –±—ã—Ç—å —Å —á–µ–ª–æ–≤–µ–∫–æ–º, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω–æ–∫–∏–º.
üîπ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–Ω–æ—Å—è—Ç —Ä–∞–¥–æ—Å—Ç–∏ ‚Äî –¥–∞–∂–µ –±–æ–ª—å—à–∏–µ —É—Å–ø–µ—Ö–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –º–∏–º–æ, –Ω–µ –∑–∞–¥–µ–≤–∞—è –≤–Ω—É—Ç—Ä–∏ –Ω–∏—á–µ–≥–æ.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ ¬´–∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—É—Å—Ç–æ—Ç—É¬ª ‚Äî —á–µ—Ä–µ–∑ –ª—é–¥–µ–π, –ø–æ–∫—É–ø–∫–∏, –µ–¥—É, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–¥–æ–ª–≥–æ.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–µ—Ç—Å—è: ¬´–∑–∞—á–µ–º —á—Ç–æ-—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ —É–≤–∏–¥–∏—Ç –∏ –Ω–µ –ø–æ–π–º—ë—Ç¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ö–æ–ª–æ–¥–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, —á–µ—Ä–µ–∑ –Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–∞—Ç—å –∏–º —Ç—É —Ç–µ–ø–ª–æ—Ç—É, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ —Ç–µ–±–µ.""",

    # 1. –ú–µ–Ω—è –æ—Å—Ç–∞–≤—è—Ç
    """<b>–≠—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ö, —á—Ç–æ –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫ —É–π–¥—ë—Ç, –æ—Ö–ª–∞–¥–µ–µ—Ç –∏–ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ç–µ–±—è –≤—ã–±–∏—Ä–∞—Ç—å.</b>

–î–∞–∂–µ –≤ —Ç—ë–ø–ª—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –≤–Ω—É—Ç—Ä–∏ –∂–∏–≤—ë—Ç —Ç—Ä–µ–≤–æ–≥–∞. –°—Ç–æ–∏—Ç –ø–∞—Ä—Ç–Ω—ë—Ä—É —á—É—Ç—å –∑–∞–º–µ—à–∫–∞—Ç—å—Å—è —Å –æ—Ç–≤–µ—Ç–æ–º –∏–ª–∏ —Å—Ç–∞—Ç—å —á—É—Ç—å —Ö–æ–ª–æ–¥–Ω–µ–µ ‚Äî –∏ –≤ –≥–æ–ª–æ–≤–µ —É–∂–µ –∫–∞—Ä—Ç–∏–Ω–∞: ¬´–æ–Ω(–∞) –º–µ–Ω—è —Ä–∞–∑–ª—é–±–∏–ª(–∞), –Ω–∞—à—ë–ª(–ª–∞) –∫–æ–≥–æ-—Ç–æ –ª—É—á—à–µ¬ª. –¢—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É, –∏—Å–∫–∞—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å–º—ã—Å–ª—ã, –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –±—ã–ª –æ–Ω–ª–∞–π–Ω.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã —á–∞—Å—Ç–æ —Ç—Ä–µ–≤–æ–∂–∏—à—å—Å—è, –ø—Ä–æ–≤–µ—Ä—è–µ—à—å, –∏—â–µ—à—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, —á—Ç–æ —Ç–µ–±—è –ª—é–±—è—Ç. –≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ –º–æ–∂–µ—Ç –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞.
üîπ –ù–∞ –≤—ã–±–æ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤–ª–∏—è–µ—Ç —Å—Ç—Ä–∞—Ö –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞ ‚Äî —Ç—ã –º–æ–∂–µ—à—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –ø–ª–æ—Ö–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –ª–∏—à—å –±—ã –Ω–µ –±—ã—Ç—å –æ–¥–Ω–æ–º—É.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å, —Ç—Ä–µ–≤–æ–≥—É, –ø–æ–ø—ã—Ç–∫–∏ ¬´–∑–∞—Å–ª—É–∂–∏—Ç—å¬ª –ª—é–±–æ–≤—å –∏ —É–¥–µ—Ä–∂–∞—Ç—å —á–µ–ª–æ–≤–µ–∫–∞.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –±–æ–∏—à—å—Å—è —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–µ —Ç–æ, —Å–¥–µ–ª–∞—Ç—å –Ω–µ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ —Å–ø—É–≥–Ω—É—Ç—å.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Ç—Ä–µ–≤–æ–∂–Ω—É—é –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å, —á—Ç–æ –ª—é–±–æ–≤—å –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞—Å–ª—É–∂–∏–≤–∞—Ç—å.""",

    # 2. –•—Ä—É–ø–∫–æ—Å—Ç—å
    """<b>–≠—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ, —á—Ç–æ –º–∏—Ä –æ–ø–∞—Å–µ–Ω –∏ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞.</b>

–¢—ã –∂–∏–≤—ë—à—å —Å —Ñ–æ–Ω–æ–≤–æ–π —Ç—Ä–µ–≤–æ–≥–æ–π: –≤–¥—Ä—É–≥ –∑–∞–±–æ–ª–µ—é, –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ —Å–ª—É—á–∏—Ç—Å—è —Å –±–ª–∏–∑–∫–∏–º–∏, –≤–¥—Ä—É–≥ –±—É–¥–µ—Ç –∞–≤–∞—Ä–∏—è, –≤–¥—Ä—É–≥ —É–≤–æ–ª—è—Ç. –¢–≤–æ–π –º–æ–∑–≥ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —É–≥—Ä–æ–∑. –¢—ã —Å—Ç–∞—Ä–∞–µ—à—å—Å—è –≤—Å—ë –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –ø–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤—ã–≤–∞—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–µ—Ç—Å—è: –µ—Å–ª–∏ —è —Ä–∞—Å—Å–ª–∞–±–ª—é—Å—å ‚Äî —Å–ª—É—á–∏—Ç—Å—è –Ω–µ–ø–æ–ø—Ä–∞–≤–∏–º–æ–µ.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã –º–æ–∂–µ—à—å –ª–∏–±–æ –≥–∏–ø–µ—Ä–æ–ø–µ–∫–∞—Ç—å –±–ª–∏–∑–∫–∏—Ö (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –≥–¥–µ –æ–Ω–∏, –∫–∞–∫ –æ–Ω–∏), –ª–∏–±–æ –∏–∑–±–µ–≥–∞—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–æ–∏—à—å—Å—è –±—É–¥—É—â–µ–π –ø–æ—Ç–µ—Ä–∏.
üîπ –í –¥–µ–Ω—å–≥–∞—Ö –∏ –∫–∞—Ä—å–µ—Ä–µ ‚Äî –∫–æ–ø–∏—à—å ¬´–Ω–∞ —á—ë—Ä–Ω—ã–π –¥–µ–Ω—å¬ª, –Ω–µ —Ä–∏—Å–∫—É–µ—à—å, –Ω–µ –≤–∫–ª–∞–¥—ã–≤–∞–µ—à—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç—Ä–∞—à–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å, –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ¬´–Ω–∞ —Å–ª—É—á–∞–π –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã¬ª –∏ –±–æ—Ä—å–±—É —Å —Ç—Ä–µ–≤–æ–≥–æ–π.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–π —Ä–∏—Å–∫ –∏–ª–∏ –≤—ã—Ö–æ–¥ –∏–∑ –∑–æ–Ω—ã –∫–æ–º—Ñ–æ—Ä—Ç–∞ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ —É–≥—Ä–æ–∑–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—é.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å: ¬´–Ω–µ –±–µ–≥–∞–π ‚Äî —É–ø–∞–¥—ë—à—å¬ª, ¬´–Ω–µ –µ—à—å —ç—Ç–æ ‚Äî –æ—Ç—Ä–∞–≤–∏—à—å—Å—è¬ª, –º–∏—Ä –ø–æ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ.""",

    # 3. –ñ–µ—Ä—Ç–≤–∞ —Ä–∞–¥–∏ –¥—Ä—É–≥–∏—Ö
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ —Å—Ç–∞–≤–∏—Ç—å —á—É–∂–∏–µ –Ω—É–∂–¥—ã –≤—ã—à–µ —Å–≤–æ–∏—Ö, –∞ –ø–æ—Ç–æ–º –æ–±–∏–∂–∞—Ç—å—Å—è, —á—Ç–æ –æ —Ç–µ–±–µ –Ω–µ –∑–∞–±–æ—Ç—è—Ç—Å—è.</b>

–¢—ã —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—à—å ¬´–¥–∞¬ª, –∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –≤—Å—ë –∫—Ä–∏—á–∏—Ç ¬´–Ω–µ—Ç¬ª. –°–æ–≥–ª–∞—à–∞–µ—à—å—Å—è –ø–æ–º–æ—á—å, –¥–∞–∂–µ –µ—Å–ª–∏ —É—Å—Ç–∞–ª(–∞) –∏–ª–∏ —É —Ç–µ–±—è —Å–≤–æ–∏ –ø–ª–∞–Ω—ã. –ê –ø–æ—Ç–æ–º —Å–∏–¥–∏—à—å –∏ –¥—É–º–∞–µ—à—å: ¬´–ø–æ—á–µ–º—É —è –æ–ø—è—Ç—å —Å–æ–≥–ª–∞—Å–∏–ª—Å—è(–ª–∞—Å—å)?¬ª, –∑–ª–∏—à—å—Å—è –Ω–∞ —Å–µ–±—è –∏ –Ω–∞ —Ç–µ—Ö, –∫—Ç–æ –ø–æ–ø—Ä–æ—Å–∏–ª. –í–Ω—É—Ç—Ä–∏ –∫–æ–ø–∏—Ç—Å—è —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ –≥–ª—É—Ö–∞—è –æ–±–∏–¥–∞: ¬´–∫–æ–≥–¥–∞ –∂–µ –∫—Ç–æ-—Ç–æ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è –æ–±–æ –º–Ω–µ?¬ª

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã —á–∞—Å—Ç–æ –æ—Ç–¥–∞—ë—à—å –±–æ–ª—å—à–µ, —á–µ–º –ø–æ–ª—É—á–∞–µ—à—å, –∞ –ø–æ—Ç–æ–º —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–º.
üîπ –ù–∞ –≤—ã–±–æ—Ä –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤–ª–∏—è–µ—Ç –±–µ—Å—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–µ –≤–ª–µ—á–µ–Ω–∏–µ –∫ —Ç–µ–º, –∫—Ç–æ –≥–æ—Ç–æ–≤ –±—Ä–∞—Ç—å, –Ω–µ –æ—Ç–¥–∞–≤–∞—è ‚Äî –∫ ¬´–Ω—É–∂–¥–∞—é—â–∏–º—Å—è¬ª –ª—é–¥—è–º.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –∑–∞–±–æ—Ç—É –æ –¥—Ä—É–≥–∏—Ö, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –æ–±–∏–¥—ã, –∫–æ—Ç–æ—Ä–∞—è –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ—Ä—ã–≤–∞–µ—Ç—Å—è.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å –¥–µ—Ç—Å—Ç–≤–∞ —Ç—ã —É—Å–≤–æ–∏–ª(–∞): —Ç–≤–æ—è —Ü–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –≤ —Ç–≤–æ–µ–π –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–π: ¬´—Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–¥–æ–±–Ω—ã–º, —á—Ç–æ–±—ã —Ç–µ–±—è –ª—é–±–∏–ª–∏¬ª.""",

    # 4. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—Ä–∏—Ç–∏–∫
    """<b>–≠—Ç–æ –≥–æ–ª–æ—Å –≤–Ω—É—Ç—Ä–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–≤–æ–ª–µ–Ω –∏ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç, –∫ —á–µ–º—É –ø—Ä–∏–¥—Ä–∞—Ç—å—Å—è.</b>

–ß—Ç–æ –±—ã —Ç—ã –Ω–∏ —Å–¥–µ–ª–∞–ª(–∞) ‚Äî –µ–º—É –≤—Å–µ–≥–¥–∞ –º–∞–ª–æ. ¬´–ú–æ–∂–Ω–æ –±—ã–ª–æ –ª—É—á—à–µ¬ª, ¬´—Ç—ã –æ–ø—è—Ç—å –æ—à–∏–±—Å—è(–ª–∞—Å—å)¬ª, ¬´–ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö ‚Äî –æ–Ω–∏ –ª—É—á—à–µ¬ª. –î–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, —ç—Ç–æ—Ç –≥–æ–ª–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç, –∫ —á–µ–º—É –ø—Ä–∏—Ü–µ–ø–∏—Ç—å—Å—è. –í–µ—á–µ—Ä–æ–º, –ª—ë–∂–∞ –≤ –∫—Ä–æ–≤–∞—Ç–∏, —Ç—ã –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—à—å –ø—Ä–æ—à–µ–¥—à–∏–π –¥–µ–Ω—å –∏ –Ω–∞—Ö–æ–¥–∏—à—å –º–∏–Ω–∏–º—É–º —Ç—Ä–∏ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–¥–µ–ª–∞–ª(–∞) ¬´–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ¬ª.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–µ–¥—ä—è–≤–ª—è—Ç—å –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ–±–µ –∫–∞–∫ –∫ –ø–∞—Ä—Ç–Ω—ë—Ä—É, –∞ —á–∞—Å—Ç–æ ‚Äî –∏ –∫ –¥—Ä—É–≥–∏–º.
üîπ –í —Ä–∞–±–æ—Ç–µ –∏ –¥–µ–Ω—å–≥–∞—Ö ‚Äî –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º, —Å—Ç—Ä–∞—Ö –æ—à–∏–±–∫–∏, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ ¬´—É–ª—É—á—à–µ–Ω–∏–µ¬ª –≤–º–µ—Å—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ª.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫—É, –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç–∏—á—å –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–≥–æ –∏–¥–µ–∞–ª–∞.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–µ–±–µ –∫–∞–∂–µ—Ç—Å—è: ¬´—è –µ—â—ë –Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–±—è¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±—ã—Ç—å –ª—É—á—à–∏–º.""",

    # 5. –ù–∏–∫–æ–º—É –Ω–µ –≤–µ—Ä—é
    """<b>–≠—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–≤–æ—Ö–∞ –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ –∫ –ª—é–¥—è–º, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–Ω–∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏.</b>

–¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å. –î–∞–∂–µ –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –¥–æ–±—Ä –∏ –æ—Ç–∫—Ä—ã—Ç, –≤–Ω—É—Ç—Ä–∏ —Å–∏–¥–∏—Ç –º—ã—Å–ª—å: ¬´–æ–Ω –ø—Ä–æ—Å—Ç–æ —á—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –æ—Ç –º–µ–Ω—è¬ª –∏–ª–∏ ¬´–≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥–∞—Å—Ç¬ª. –¢—ã —Ä–µ–¥–∫–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å—Å—è –¥–æ –∫–æ–Ω—Ü–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–æ–∏—à—å—Å—è, —á—Ç–æ —Ç–≤–æ—é —Å–ª–∞–±–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Ç–∏–≤ —Ç–µ–±—è. –ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–∏—è—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî —Ç—ã –∏—â–µ—à—å —Å–∫—Ä—ã—Ç—ã–π —Å–º—ã—Å–ª.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã –¥–µ—Ä–∂–∏—à—å –¥–∏—Å—Ç–∞–Ω—Ü–∏—é, –Ω–µ –ø–æ–¥–ø—É—Å–∫–∞–µ—à—å –±–ª–∏–∑–∫–æ, –≤—Å–µ–≥–¥–∞ –∂–¥—ë—à—å —É–¥–∞—Ä–∞.
üîπ –í –¥—Ä—É–∂–±–µ –∏ —Ä–∞–±–æ—Ç–µ ‚Äî —Ç—Ä—É–¥–Ω–æ –ø—Ä–æ—Å–∏—Ç—å –æ –ø–æ–º–æ—â–∏, —Ç—Ä—É–¥–Ω–æ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö, –≤—Å—ë –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥–µ–ª–∞—Ç—å —Å–∞–º–æ–º—É.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –∞–Ω–∞–ª–∏–∑ —á—É–∂–∏—Ö –Ω–∞–º–µ—Ä–µ–Ω–∏–π, –ø–æ–∏—Å–∫ –ø–æ–¥–≤–æ—Ö–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±—Ä–æ–Ω–∏.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–∞—è –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–∂–µ—Ç—Å—è —Ä–∏—Å–∫–æ–º.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ –∫ –º–∏—Ä—É –∏ –ª—é–¥—è–º: ¬´–Ω–∏–∫–æ–º—É –Ω–µ–ª—å–∑—è –≤–µ—Ä–∏—Ç—å¬ª.""",

    # 6. –ù–µ –¥–æ—Ç—è–≥–∏–≤–∞—é
    """<b>–≠—Ç–æ –≥–ª—É–±–æ–∫–æ–µ —á—É–≤—Å—Ç–≤–æ, —á—Ç–æ —Å —Ç–æ–±–æ–π —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, —á—Ç–æ —Ç—ã —Ö—É–∂–µ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–æ–π–Ω–µ–µ –¥—Ä—É–≥–∏—Ö.</b>

–í –≥–ª—É–±–∏–Ω–µ –¥—É—à–∏ —Ç—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ —Ç—ã ¬´–∫–∞–∫–æ–π-—Ç–æ –Ω–µ —Ç–∞–∫–æ–π¬ª. –î—Ä—É–≥–∏–µ –ª—é–¥–∏ –∫–∞–∂—É—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏, –¥–æ—Å—Ç–æ–π–Ω—ã–º–∏, –∞ —Ç—ã ‚Äî –Ω–µ—Ç. –ö–æ–≥–¥–∞ —Ç–µ–±—è —Ö–≤–∞–ª—è—Ç, —Ç—ã –Ω–µ –≤–µ—Ä–∏—à—å: ¬´–æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–Ω–∞—é—Ç –º–µ–Ω—è –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ¬ª. –¢—ã –∂–∏–≤—ë—à—å —Å –æ—â—É—â–µ–Ω–∏–µ–º, —á—Ç–æ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –º–æ–≥—É—Ç ¬´—Ä–∞—Å–∫—É—Å–∏—Ç—å¬ª –∏ –æ—Ç–≤–µ—Ä–Ω—É—Ç—å—Å—è.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã –±–æ–∏—à—å—Å—è, —á—Ç–æ –ø–∞—Ä—Ç–Ω—ë—Ä —É–≤–∏–¥–∏—Ç —Ç–≤–æ–∏ ¬´–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏¬ª –∏ —É–π–¥—ë—Ç. –¢—ã —á–∞—Å—Ç–æ –∏–∑–≤–∏–Ω—è–µ—à—å—Å—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –≤–∏–Ω–æ–≤–∞—Ç(–∞).
üîπ –í —Ä–∞–±–æ—Ç–µ —Ç–µ–±–µ —Ç—Ä—É–¥–Ω–æ –ø—Ä–æ—Å–∏—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏—è, –∑–∞—è–≤–ª—è—Ç—å –æ —Å–µ–±–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ ¬´—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à¬ª.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ ¬´—Ñ–∞—Å–∞–¥–∞¬ª ‚Äî —Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –º–∏—Ä—É —É–¥–æ–±–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–µ–±—è, –∞ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ø—Ä—è—á–µ—à—å.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∂–µ—Ç—Å—è: ¬´–µ—Å–ª–∏ —è –ø–æ–∫–∞–∂—É —Å–µ–±—è ‚Äî –º–µ–Ω—è –æ—Ç–≤–µ—Ä–≥–Ω—É—Ç¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–∏–∑–∫—É—é —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ —á—É–≤—Å—Ç–≤–æ, —á—Ç–æ –æ–Ω–∏ ¬´–Ω–µ —Ç–∞–∫–∏–µ¬ª.""",

    # 7. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
    """<b>–≠—Ç–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –æ–¥–Ω–æ–π/–æ–¥–Ω–æ–º—É –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è, —á—Ç–æ –Ω—É–∂–µ–Ω –∫—Ç–æ-—Ç–æ, –∫—Ç–æ –±—É–¥–µ—Ç —Ä—è–¥–æ–º –∏ –ø–æ–º–æ–∂–µ—Ç.</b>

–¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –±–µ–∑ —Å–æ–≤–µ—Ç–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –ë–µ–∑ –±–ª–∏–∑–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —Ä—è–¥–æ–º —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ –∏ —Ç—Ä–µ–≤–æ–∂–Ω–æ, –∫–∞–∫ –±—É–¥—Ç–æ –Ω–µ –º–æ–∂–µ—à—å –æ–ø–µ—Ä–µ—Ç—å—Å—è –Ω–∞ —Å–µ–±—è. –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã –∫—Ç–æ-—Ç–æ –±—ã–ª —Ä—è–¥–æ–º –∏ –≥–æ–≤–æ—Ä–∏–ª: ¬´–≤—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ¬ª. –¢—ã –º–æ–∂–µ—à—å –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –¥—Ä—É–≥–∏—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∂–∏–≤—ë—Ç —Å—Ç—Ä–∞—Ö: ¬´–∞ –≤–¥—Ä—É–≥ —è –æ—à–∏–±—É—Å—å?¬ª

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã –∏—â–µ—à—å ¬´—Å–∏–ª—å–Ω–æ–µ –ø–ª–µ—á–æ¬ª, —Ç–æ–≥–æ, –∫—Ç–æ –≤–æ–∑—å–º—ë—Ç –Ω–∞ —Å–µ–±—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏.
üîπ –í –¥–µ–Ω—å–≥–∞—Ö –∏ –∫–∞—Ä—å–µ—Ä–µ ‚Äî —Ç—Ä—É–¥–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å —Å–≤–æ—ë –¥–µ–ª–æ, —Ç—Ä—É–¥–Ω–æ –±—Ä–∞—Ç—å –Ω–∞ —Å–µ–±—è —Ä–∏—Å–∫–∏, –ª–µ–≥—á–µ –±—ã—Ç—å –≤ –ø–æ–¥—á–∏–Ω–µ–Ω–∏–∏.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–∏—Å–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Å–æ–º–Ω–µ–Ω–∏—è –∏ –æ–∂–∏–¥–∞–Ω–∏–µ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –ø—Ä–∏–¥—ë—Ç –∏ —Å–ø–∞—Å—ë—Ç.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –Ω–µ –≤–µ—Ä–∏—à—å –≤ —Å–≤–æ–∏ —Å–∏–ª—ã –∏ —Å–≤–æ—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç—å –∏ –Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.""",

    # 8. –ñ–∞–∂–¥–∞ –ø–æ—Ö–≤–∞–ª—ã
    """<b>–≠—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –æ —Ç–µ–±–µ –¥—É–º–∞—é—Ç –¥—Ä—É–≥–∏–µ, –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –æ–¥–æ–±—Ä–µ–Ω–∏–∏.</b>

–¢–µ–±–µ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, –∫–∞–∫ –∫ —Ç–µ–±–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è. –ï—Å–ª–∏ —Ç–µ–±—è –Ω–µ —Ö–≤–∞–ª—è—Ç, –Ω–µ –∑–∞–º–µ—á–∞—é—Ç, –Ω–µ –æ–¥–æ–±—Ä—è—é—Ç ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç, –∏ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –ø–æ—á—Ç–∏ –Ω–µ–≤–∏–¥–∏–º—ã–º(–æ–π). –¢–≤–æ—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ —Å–∫–∞–∑–∞–ª–∏ –¥—Ä—É–≥–∏–µ. –û–¥–Ω–∞ –ø–æ—Ö–≤–∞–ª–∞ ‚Äî –∏ —Ç—ã –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ. –û–¥–Ω–æ –∑–∞–º–µ—á–∞–Ω–∏–µ ‚Äî –∏ —Ç—ã –≤ –ø—Ä–æ–ø–∞—Å—Ç–∏.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã —á–∞—Å—Ç–æ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å—Å—è –ø–æ–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –∏–¥—ë—Ç –≤—Ä–∞–∑—Ä–µ–∑ —Å —Ç–≤–æ–∏–º–∏ –∂–µ–ª–∞–Ω–∏—è–º–∏.
üîπ –í —Ä–∞–±–æ—Ç–µ —Ç—ã –º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å –Ω–µ —Ç–æ, —á—Ç–æ —Ö–æ—á–µ—à—å, –∞ —Ç–æ, –∑–∞ —á—Ç–æ –ø–æ—Ö–≤–∞–ª—è—Ç –∏ –∑–∞–º–µ—Ç—è—Ç.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ ¬´—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –æ–∫—Ä—É–∂–∞—é—â–∏—Ö ‚Äî –∫—Ç–æ —á—Ç–æ –ø–æ–¥—É–º–∞–ª, –∫—Ç–æ –∫–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ–ª.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–≥–ª—è–¥—ã–≤–∞–µ—à—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö: ¬´–∞ —á—Ç–æ –æ–Ω–∏ —Å–∫–∞–∂—É—Ç?¬ª
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ—Ü–µ–Ω–æ–∫ –∏ —á—É–∂–æ–≥–æ –º–Ω–µ–Ω–∏—è.""",

    # 9. –Ø –¥–ª—è –≤—Å–µ—Ö
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ –±—ã—Ç—å —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤—Å–µ—Ö, —Å–æ–≥–ª–∞—à–∞—Ç—å—Å—è –∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ä—Ç–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.</b>

–¢—ã —á–∞—Å—Ç–æ —Å–æ–≥–ª–∞—à–∞–µ—à—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞). –¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ —Å–∫–∞–∑–∞—Ç—å ¬´–Ω–µ—Ç¬ª, —Ç—Ä—É–¥–Ω–æ –æ—Ç—Å—Ç–æ—è—Ç—å —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –±–æ–∏—à—å—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞. –¢—ã –º–æ–∂–µ—à—å —Å–º–µ—è—Ç—å—Å—è –Ω–∞–¥ —à—É—Ç–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–º–µ—à–Ω—ã, –¥–µ–ª–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω–µ —Ö–æ—á–µ—à—å ‚Äî –ª–∏—à—å –±—ã –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è. –ê –ø–æ—Ç–æ–º —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ –ø—É—Å—Ç–æ—Ç—É.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã —á–∞—Å—Ç–æ –æ–∫–∞–∑—ã–≤–∞–µ—à—å—Å—è –≤ —Ä–æ–ª–∏ ¬´–≤–µ–¥–æ–º–æ–≥–æ¬ª, —Ç–µ—Ä—è–µ—à—å —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –∏ —Å–≤–æ–∏ –∂–µ–ª–∞–Ω–∏—è.
üîπ –í —Ä–∞–±–æ—Ç–µ ‚Äî –±–µ—Ä—ë—à—å –Ω–∞ —Å–µ–±—è –ª–∏—à–Ω–µ–µ, –Ω–µ —É–º–µ–µ—à—å –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—á–∞–ª—å—Å—Ç–≤—É –∏ –∫–æ–ª–ª–µ–≥–∞–º.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –∂–µ–ª–∞–Ω–∏–π, –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π –∏ ¬´–ø—Ä–æ–≥–ª–∞—Ç—ã–≤–∞–Ω–∏–µ¬ª –æ–±–∏–¥.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å –¥–µ—Ç—Å—Ç–≤–∞ —Ç—ã —É—Å–≤–æ–∏–ª(–∞): –ª—é–±–æ–≤—å –¥–∞—ë—Ç—Å—è –≤ –æ–±–º–µ–Ω –Ω–∞ –ø–æ–∫–æ—Ä–Ω–æ—Å—Ç—å.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–π: ¬´–±—É–¥—å —É–¥–æ–±–Ω—ã–º ‚Äî –∏ —Ç–µ–±—è –±—É–¥—É—Ç –ª—é–±–∏—Ç—å¬ª.""",

    # 10. –ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ —á—É–≤—Å—Ç–≤–∞
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ –ø–æ–¥–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏, –ø—Ä—è—Ç–∞—Ç—å –∏—Ö –≥–ª—É–±–æ–∫–æ –≤–Ω—É—Ç—Ä–∏, —á—Ç–æ–±—ã –Ω–µ –∫–∞–∑–∞—Ç—å—Å—è —Å–ª–∞–±—ã–º.</b>

–¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ –ø—Ä–æ—è–≤–ª—è—Ç—å —á—É–≤—Å—Ç–≤–∞. –ö–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –ø–ª–∞–∫–∞—Ç—å ‚Äî —Ç—ã —Å–¥–µ—Ä–∂–∏–≤–∞–µ—à—å—Å—è. –ö–æ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è ‚Äî —Ç–æ–∂–µ —Å–¥–µ—Ä–∂–∏–≤–∞–µ—à—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –µ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∞: ¬´—Å–∏–ª—å–Ω—ã–µ –ª—é–¥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —ç–º–æ—Ü–∏–∏¬ª. –¢—ã –º–æ–∂–µ—à—å –¥–∞–∂–µ –Ω–µ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Å–µ–π—á–∞—Å —á—É–≤—Å—Ç–≤—É–µ—à—å ‚Äî –∫–∞–∫ –±—É–¥—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≥–ª—É—Ö–∞—è —Å—Ç–µ–Ω–∞. –î—Ä—É–≥–∏–µ –º–æ–≥—É—Ç –≥–æ–≤–æ—Ä–∏—Ç—å, —á—Ç–æ —Ç—ã —Ö–æ–ª–æ–¥–Ω—ã–π(–∞—è), –Ω–æ —Ç—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ —á—É–≤—Å—Ç–≤–∞ –µ—Å—Ç—å ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–Ω–∏ –≥–ª—É–±–æ–∫–æ –ø–æ–¥ –∑–∞–º–∫–æ–º.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç–µ–±–µ —Ç—Ä—É–¥–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö, —Ç—Ä—É–¥–Ω–æ –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º. –ü–∞—Ä—Ç–Ω—ë—Ä—É –º–æ–∂–µ—Ç –∫–∞–∑–∞—Ç—å—Å—è, —á—Ç–æ —Ç—ã —Ä–∞–≤–Ω–æ–¥—É—à–µ–Ω(–Ω–∞).
üîπ –í –∂–∏–∑–Ω–∏ —Ç—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å –æ–ø—É—Å—Ç–æ—à—ë–Ω–Ω–æ—Å—Ç—å, –∫–∞–∫ –±—É–¥—Ç–æ –∂–∏–≤—ë—à—å ¬´–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–µ¬ª.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —ç–º–æ—Ü–∏—è–º–∏, —Å–¥–µ—Ä–∂–∏–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ —Ä–≤—ë—Ç—Å—è –Ω–∞—Ä—É–∂—É.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ —Ç—ã —Ä–µ—à–∏–ª(–∞): —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äî –æ–ø–∞—Å–Ω–æ.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ö–æ–ª–æ–¥–Ω–æ—Å—Ç—å, —á–µ—Ä–µ–∑ –Ω–µ—É–º–µ–Ω–∏–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —á—É–≤—Å—Ç–≤–∞—Ö.""",

    # 11. –°–∞–±–æ—Ç–∞–∂ —É—Å–ø–µ—Ö–∞
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ –±—Ä–æ—Å–∞—Ç—å –¥–µ–ª–∞ –Ω–∞ –ø–æ–ª–ø—É—Ç–∏, –Ω–µ –¥–æ–≤–æ–¥–∏—Ç—å –¥–æ –∫–æ–Ω—Ü–∞, –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ—Ç —Ü–µ–ª–µ–π –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç.</b>

–¢—ã –∑–∞–º–µ—á–∞–ª(–∞), —á—Ç–æ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –¥–µ–ª–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ –∫–æ–Ω—Ü—É –∏ –≤–æ—Ç-–≤–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å–ø–µ—Ö ‚Äî —É —Ç–µ–±—è –≤–¥—Ä—É–≥ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å, –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ä–æ—á–Ω—ã–µ –¥–µ–ª–∞, –∏ —Ç—ã –±—Ä–æ—Å–∞–µ—à—å? –ò–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—à—å —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è: ¬´–∞ –Ω—É–∂–Ω–æ –ª–∏ —ç—Ç–æ –≤–æ–æ–±—â–µ?¬ª –¢—ã –º–æ–∂–µ—à—å –º–µ—á—Ç–∞—Ç—å –æ —á—ë–º-—Ç–æ –±–æ–ª—å—à–æ–º, –Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äî –Ω–∞—Ö–æ–¥–∏—à—å —Ç—ã—Å—è—á—É –ø—Ä–∏—á–∏–Ω –Ω–µ –Ω–∞—á–∏–Ω–∞—Ç—å.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –∫–∞—Ä—å–µ—Ä–µ ‚Äî —Ç—ã –Ω–µ –¥–æ—Ö–æ–¥–∏—à—å –¥–æ –ø–æ–≤—ã—à–µ–Ω–∏—è, –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—à—å –ø—Ä–æ–µ–∫—Ç—ã, –Ω–µ –ø–æ–ª—É—á–∞–µ—à—å –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–¥–∞–ª—è—Ç—å—Å—è, –∫–æ–≥–¥–∞ –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–æ –∏ —Å–µ—Ä—å—ë–∑–Ω–æ.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –±–æ—Ä—å–±—É —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º –∏ –Ω–∞ —Å–∞–º–æ–±–∏—á–µ–≤–∞–Ω–∏–µ –∑–∞ —Ç–æ, —á—Ç–æ –æ–ø—è—Ç—å –±—Ä–æ—Å–∏–ª(–∞).
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∂–∏–≤—ë—Ç —Å—Ç—Ä–∞—Ö: ¬´–∞ –≤–¥—Ä—É–≥ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è? –ª—É—á—à–µ –Ω–µ –ø—Ä–æ–±–æ–≤–∞—Ç—å¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞—Ö –Ω–µ—É–¥–∞—á–∏ –∏ –Ω–µ–≤–µ—Ä–∏–µ –≤ —Å–≤–æ–∏ —Å–∏–ª—ã.""",

    # 12. –ù–µ –º–æ–≥—É —Å–µ–±—è –∑–∞—Å—Ç–∞–≤–∏—Ç—å
    """<b>–≠—Ç–æ —Ç—Ä—É–¥–Ω–æ—Å—Ç—å —Å —Å–∞–º–æ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π, –∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –≤–∞–∂–Ω–æ.</b>

–¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –¥–µ–ª–∞—Ç—å —Å–∫—É—á–Ω—ã–µ –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –¥–µ–ª–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –æ–Ω–∏ –≤–∞–∂–Ω—ã. –¢—ã –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—à—å, –∏—â–µ—à—å –æ—Ç–≥–æ–≤–æ—Ä–∫–∏, –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∏—Ä—É–µ—à—å, –∞ –ø–æ—Ç–æ–º —Ä—É–≥–∞–µ—à—å —Å–µ–±—è –∑–∞ —ç—Ç–æ. –ù–æ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—Å—ë –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞. –¢—ã –º–æ–∂–µ—à—å —Å–∏–¥–µ—Ç—å –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–µ–Ω—É, –ø–æ–Ω–∏–º–∞—è, —á—Ç–æ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Ç–µ–ª–æ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í —Ä–∞–±–æ—Ç–µ –∏ —É—á—ë–±–µ ‚Äî —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ–¥–ª–∞–π–Ω—ã, –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–±–µ—â–∞–Ω–∏—è, —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã.
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—Ä—É–¥–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–±–µ—â–∞–Ω–∏—è, —Ç—Ä—É–¥–Ω–æ –±—ã—Ç—å –Ω–∞–¥—ë–∂–Ω—ã–º –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º.
üîπ –í –¥–µ–Ω—å–≥–∞—Ö ‚Äî —Ç—Ä—É–¥–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –≤–µ—Å—Ç–∏ –±—é–¥–∂–µ—Ç, –∫–æ–ø–∏—Ç—å, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –±–æ—Ä—å–±—É —Å —Å–æ–±–æ–π, –Ω–∞ —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –∏ –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ ¬´–≤–∑—è—Ç—å —Å–µ–±—è –≤ —Ä—É–∫–∏¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å —Å–∞–º–æ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π.""",

    # 13. –ù–∏–∫—Ç–æ –Ω–µ –Ω—É–∂–µ–Ω
    """<b>–≠—Ç–æ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —Ç—ã —á—É–∂–æ–π —Å—Ä–µ–¥–∏ –ª—é–¥–µ–π, —á—Ç–æ —Ç–µ–±—è –Ω–∏–∫—Ç–æ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç.</b>

–î–∞–∂–µ —Å—Ä–µ–¥–∏ –ª—é–¥–µ–π, –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π, —Ç—ã –∏–Ω–æ–≥–¥–∞ —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è —á—É–∂–∏–º(–æ–π). –ö–∞–∫ –±—É–¥—Ç–æ —Ç—ã —Å—Ç–æ–∏—à—å –≤ —Å—Ç–æ—Ä–æ–Ω–µ –∏ —Å–º–æ—Ç—Ä–∏—à—å –Ω–∞ –Ω–∏—Ö —á–µ—Ä–µ–∑ —Å—Ç–µ–∫–ª–æ. –¢–µ–±–µ —Ç—Ä—É–¥–Ω–æ –Ω–∞–π—Ç–∏ –æ–±—â–∏–µ —Ç–µ–º—ã, —Ç—Ä—É–¥–Ω–æ –±—ã—Ç—å ¬´—Å–≤–æ–∏–º¬ª. –¢—ã –º–æ–∂–µ—à—å –æ—Ç–¥–∞–ª—è—Ç—å—Å—è –æ—Ç –ª—é–¥–µ–π, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å –±–ª–∏–∑–æ—Å—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–ª–∏–∑–æ—Å—Ç—å ‚Äî —ç—Ç–æ —Ä–∏—Å–∫. –õ—É—á—à–µ –±—ã—Ç—å –æ–¥–Ω–æ–º—É, —á–µ–º —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–∂–∏—Ç—å –±–æ–ª—å –æ—Ç–≤–µ—Ä–∂–µ–Ω–∏—è.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—ã –∏–∑–±–µ–≥–∞–µ—à—å –≥–ª—É–±–æ–∫–∏—Ö —Å–≤—è–∑–µ–π, –±—ã—Å—Ç—Ä–æ —É—Ö–æ–¥–∏—à—å, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ.
üîπ –í –¥—Ä—É–∂–±–µ ‚Äî —É —Ç–µ–±—è –º–∞–ª–æ –±–ª–∏–∑–∫–∏—Ö –¥—Ä—É–∑–µ–π, —Ç—ã —á–∞—Å—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –æ–¥–∏–Ω–æ–∫–∏–º –¥–∞–∂–µ –≤ –∫–æ–º–ø–∞–Ω–∏–∏.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ ¬´—Å—Ç–µ–Ω¬ª –∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ —Ç—ã —Ä–µ—à–∏–ª(–∞): ¬´–æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è ‚Äî –æ–ø–∞—Å–Ω–æ¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é –∏ –Ω–µ—É–º–µ–Ω–∏–µ —Å—Ç—Ä–æ–∏—Ç—å —Å–≤—è–∑–∏.""",

    # 14. –í—Å—ë –ø–ª–æ—Ö–æ
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ –≤–∏–¥–µ—Ç—å –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–≥–∞—Ç–∏–≤, —Ä–∏—Å–∫–∏ –∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∞ –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.</b>

–¢—ã —á–∞—Å—Ç–æ –∂–¥—ë—à—å —Ö—É–¥—à–µ–≥–æ. –î–∞–∂–µ –∫–æ–≥–¥–∞ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –≤–Ω—É—Ç—Ä–∏ —Å–∏–¥–∏—Ç –º—ã—Å–ª—å: ¬´—ç—Ç–æ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ, —Å–∫–æ—Ä–æ —Å–ª—É—á–∏—Ç—Å—è —á—Ç–æ-—Ç–æ –ø–ª–æ—Ö–æ–µ¬ª. –¢—ã –∑–∞–º–µ—á–∞–µ—à—å —Ä–∏—Å–∫–∏ —Ä–∞–Ω—å—à–µ, —á–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏. –ö–∞–∫ –±—É–¥—Ç–æ —É —Ç–µ–±—è –≤–Ω—É—Ç—Ä–∏ —Å—Ç–æ–∏—Ç —Ñ–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ–µ. –¢—ã –≥–æ—Ç–æ–≤–∏—à—å—Å—è –∫ –ø—Ä–æ–≤–∞–ª—É, –ø–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤—ã–≤–∞–µ—à—å—Å—è, –Ω–µ —Ä–∞–¥—É–µ—à—å—Å—è —É—Å–ø–µ—Ö–∞–º.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—ã –∂–¥—ë—à—å, —á—Ç–æ –ø–∞—Ä—Ç–Ω—ë—Ä —Ä–∞–∑–æ—á–∞—Ä—É–µ—Ç, –ø—Ä–µ–¥–∞—Å—Ç, —É–π–¥—ë—Ç. –ò —á–∞—Å—Ç–æ —Å–∞–º–∞ –ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—à—å —ç—Ç–æ —Å–≤–æ–∏–º –æ–∂–∏–¥–∞–Ω–∏–µ–º.
üîπ –í –¥–µ–Ω—å–≥–∞—Ö ‚Äî –±–æ–∏—à—å—Å—è –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å, –±–æ–∏—à—å—Å—è —Ä–∏—Å–∫–æ–≤–∞—Ç—å, –±–æ–∏—à—å—Å—è, —á—Ç–æ –≤—Å—ë –ø–æ—Ç–µ—Ä—è–µ—à—å.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ —Ö—É–¥—à–µ–º—É.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å –¥–µ—Ç—Å—Ç–≤–∞ —Ç—ã —É—Å–≤–æ–∏–ª(–∞): ¬´—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è —Ä–∞–Ω–æ ‚Äî –≤–¥—Ä—É–≥ –ø–æ—Ç–æ–º –±—É–¥–µ—Ç —Ö—É–∂–µ¬ª.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Å—Å–∏–º–∏–∑–º –∏ –Ω–µ–¥–æ–≤–µ—Ä–∏–µ –∫ –∂–∏–∑–Ω–∏.""",

    # 15. –Ø - —ç—Ç–æ —Ç—ã
    """<b>–≠—Ç–æ –ø—Ä–∏–≤—ã—á–∫–∞ —Ä–∞—Å—Ç–≤–æ—Ä—è—Ç—å—Å—è –≤ –ø–∞—Ä—Ç–Ω—ë—Ä–µ, —Ç–µ—Ä—è—Ç—å —Å–≤–æ–∏ –∂–µ–ª–∞–Ω–∏—è –∏ –∂–∏—Ç—å —á—É–∂–æ–π –∂–∏–∑–Ω—å—é.</b>

–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö —Ç—ã —á–∞—Å—Ç–æ —Ç–µ—Ä—è–µ—à—å —Å–µ–±—è. –¢—ã –Ω–∞—á–∏–Ω–∞–µ—à—å –∂–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞, —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ —Ñ–∏–ª—å–º—ã, —á—Ç–æ –Ω—Ä–∞–≤—è—Ç—Å—è –µ–º—É/–µ–π, –µ—Å—Ç—å —Ç—É –µ–¥—É, —á—Ç–æ –ª—é–±–∏—Ç –æ–Ω/–æ–Ω–∞, –¥—É–º–∞—Ç—å —Ç–∞–∫, –∫–∞–∫ –¥—É–º–∞–µ—Ç –æ–Ω/–æ–Ω–∞. –¢–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–∞–∑–º—ã—Ç—ã–º–∏. –ö–æ–≥–¥–∞ —Ç—ã –æ—Å—Ç–∞—ë—à—å—Å—è –æ–¥–∏–Ω(–Ω–∞), —Ç—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—à—å: ¬´–∞ —á–µ–≥–æ —Ö–æ—á—É —è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?¬ª

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å—Å—è, —Ç–µ—Ä—è–µ—à—å —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã, –∞ –ø–æ—Ç–æ–º —á—É–≤—Å—Ç–≤—É–µ—à—å –æ–ø—É—Å—Ç–æ—à–µ–Ω–∏–µ.
üîπ –í –∂–∏–∑–Ω–∏ ‚Äî —Ç—ã –Ω–µ –∑–Ω–∞–µ—à—å, —á–µ–≥–æ —Ö–æ—á–µ—à—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ–≥–¥–∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ ¬´—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –∏ –ø–æ–¥—Å—Ç—Ä–æ–π–∫—É –ø–æ–¥ –µ–≥–æ –∂–µ–ª–∞–Ω–∏—è.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å –¥–µ—Ç—Å—Ç–≤–∞ —Ç–≤–æ–∏ –∂–µ–ª–∞–Ω–∏—è –Ω–µ —Å—á–∏—Ç–∞–ª–∏—Å—å –≤–∞–∂–Ω—ã–º–∏.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞–∑–º—ã—Ç—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞—Ç—å —Å–≤–æ–∏ –∏—Å—Ç–∏–Ω–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è.""",

    # 16. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å—É–¥—å—è
    """<b>–≠—Ç–æ —Å—Ç—Ä–æ–≥–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–æ—â–∞–µ—Ç –æ—à–∏–±–æ–∫ ‚Äî –Ω–∏ —Ç–µ–±–µ, –Ω–∏ –¥—Ä—É–≥–∏–º.</b>

–¢—ã –æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–æ –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –æ—à–∏–±–∫–∞–º. –ï—Å–ª–∏ —Ç—ã –æ—à–∏–±—Å—è(–ª–∞—Å—å) ‚Äî —Ç—ã –¥–æ–ª–≥–æ —Å–µ–±—è —Ä—É–≥–∞–µ—à—å –∏ –Ω–µ –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–∏—Ç—å. –ï—Å–ª–∏ –æ—à–∏–±—Å—è –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π ‚Äî —Ç—ã —Ç–æ–∂–µ –∑–ª–∏—à—å—Å—è –∏ —Å—á–∏—Ç–∞–µ—à—å, —á—Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–µ—Å—Ç–∏ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ. –¢—ã —Ç—Ä–µ–±—É–µ—à—å –æ—Ç —Å–µ–±—è –∏ –¥—Ä—É–≥–∏—Ö –∏–¥–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑—É–ø—Ä–µ—á–Ω–æ—Å—Ç–∏. –ö–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–¥–µ–∞–ª–æ–º ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≥–Ω–µ–≤ –∏ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç—ã —á–∞—Å—Ç–æ –æ—Å—É–∂–¥–∞–µ—à—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞, —Ç—Ä–µ–±—É–µ—à—å –æ—Ç –Ω–µ–≥–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–∞, –Ω–µ –ø—Ä–æ—â–∞–µ—à—å —Å–ª–∞–±–æ—Å—Ç–µ–π.
üîπ –í —Ä–∞–±–æ—Ç–µ ‚Äî —Ç—ã –±–µ–∑–∂–∞–ª–æ—Å—Ç–µ–Ω –∫ —Å–µ–±–µ –∑–∞ –ª—é–±—É—é –æ—à–∏–±–∫—É, —ç—Ç–æ –≤—ã–º–∞—Ç—ã–≤–∞–µ—Ç –∏ –ª–∏—à–∞–µ—Ç —Å–∏–ª.
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–∞–º–æ–±–∏—á–µ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ ¬´–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö¬ª —á—É–≤—Å—Ç–≤.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –¥–µ—Ç—Å—Ç–≤–µ –æ—à–∏–±–∫–∏ –∂–µ—Å—Ç–æ–∫–æ –Ω–∞–∫–∞–∑—ã–≤–∞–ª–∏—Å—å.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –∂—ë—Å—Ç–∫–æ—Å—Ç—å –∏ –Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–æ—â–∞—Ç—å.""",

    # 17. –Ø –ª—É—á—à–µ/—Ö—É–∂–µ –≤—Å–µ—Ö
    """<b>–≠—Ç–æ –∫–∞—á–µ–ª–∏ –≤ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–µ: —Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –ª—É—á—à–µ –≤—Å–µ—Ö, —Ç–æ —Ö—É–∂–µ –≤—Å–µ—Ö ‚Äî –∏ —ç—Ç–æ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ –¥–µ–Ω—å.</b>

–¢–≤–æ—ë –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å–µ–±–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ –º–∞—è—Ç–Ω–∏–∫. –í –∫–∞–∫–∏–µ-—Ç–æ –º–æ–º–µ–Ω—Ç—ã —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–±—è –æ—Å–æ–±–µ–Ω–Ω—ã–º(–æ–π), —É–º–Ω–µ–µ, —É—Å–ø–µ—à–Ω–µ–µ, –∫—Ä–∞—Å–∏–≤–µ–µ –¥—Ä—É–≥–∏—Ö. –ê –≤ –∫–∞–∫–∏–µ-—Ç–æ ‚Äî –ø–∞–¥–∞–µ—à—å –≤ –ø—Ä–æ–ø–∞—Å—Ç—å –∏ –¥—É–º–∞–µ—à—å, —á—Ç–æ —Ç—ã —Ö—É–∂–µ –≤—Å–µ—Ö, –Ω–∏—á—Ç–æ–∂–µ—Å—Ç–≤–æ, –Ω–µ—É–¥–∞—á–Ω–∏–∫. –≠—Ç–∏ –ø–µ—Ä–µ–ø–∞–¥—ã –º–æ–≥—É—Ç —Å–ª—É—á–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ –¥–µ–Ω—å. –¢–æ —Ç—ã —Ç—Ä–µ–±—É–µ—à—å –æ—Å–æ–±–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —Ç–æ —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ –Ω–µ–¥–æ—Å—Ç–æ–∏–Ω(–π–Ω–∞) –Ω–∏—á–µ–≥–æ.

<b>–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∂–∏–∑–Ω–∏:</b>
üîπ –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö ‚Äî —Ç–æ —Ç—ã –∏–¥–µ–∞–ª–∏–∑–∏—Ä—É–µ—à—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞, —Ç–æ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–µ—à—å. –¢–æ –∂–µ —Å–∞–º–æ–µ —Å –¥—Ä—É–∑—å—è–º–∏ –∏ –∫–æ–ª–ª–µ–≥–∞–º–∏.
üîπ –í —Ä–∞–±–æ—Ç–µ ‚Äî —Ç–æ –±–µ—Ä—ë—à—å—Å—è –∑–∞ –Ω–µ–ø–æ—Å–∏–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—á—É–≤—Å—Ç–≤—É—è —Å–µ–±—è —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–º), —Ç–æ –±—Ä–æ—Å–∞–µ—à—å –≤—Å—ë (—á—É–≤—Å—Ç–≤—É—è —Å–µ–±—è –Ω–∏—á—Ç–æ–∂–µ—Å—Ç–≤–æ–º).
üîπ –≠–Ω–µ—Ä–≥–∏—è —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ ¬´–æ–±—Ä–∞–∑–∞¬ª –∏ –Ω–∞ –±–æ—Ä—å–±—É —Å —á—É–≤—Å—Ç–≤–æ–º –Ω–∏—á—Ç–æ–∂–Ω–æ—Å—Ç–∏.
üîπ –ü—Ä–æ—è–≤–ª—è—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –¥–µ—Ç—Å—Ç–≤–µ —Ç—ã –Ω–µ –ø–æ–ª—É—á–∏–ª(–∞) —Ä–æ–≤–Ω–æ–π, —É—Å—Ç–æ–π—á–∏–≤–æ–π –ª—é–±–≤–∏.
üîπ –î–µ—Ç—è–º —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—É—é —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ –ø–µ—Ä–µ–ø–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è."""
]

# ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
def get_branch_scores(scores):
    return {
        'A': sum(scores[i] for i in BRANCH_A),
        'B': sum(scores[i] for i in BRANCH_B),
        'C': sum(scores[i] for i in BRANCH_C),
        'D': sum(scores[i] for i in BRANCH_D)
    }

def get_top_branches(branch_scores, threshold=5):
    sorted_branches = sorted(branch_scores.items(), key=lambda x: x[1], reverse=True)
    if len(sorted_branches) > 1 and sorted_branches[0][1] - sorted_branches[1][1] <= threshold:
        return [sorted_branches[0][0], sorted_branches[1][0]]
    return [sorted_branches[0][0]]

def get_global_question_number(data, stage, index, branch_q_asked):
    if stage == "first":
        return index + 1
    elif stage == "branch":
        return 10 + branch_q_asked + 1
    else:
        return 16 + index + 1

# ==================== –û–°–ù–û–í–ù–´–ï –•–ï–ù–î–õ–ï–†–´ ====================

@dp.message(CommandStart())
async def start_handler(message: Message, state: FSMContext):
    username = message.from_user.first_name or "–¥—Ä—É–≥"
    text = f"""–ü—Ä–∏–≤–µ—Ç, {username}! ‚ù§Ô∏è

–ë—ã–≤–∞–µ—Ç, —á—Ç–æ –∂–∏–∑–Ω—å –±—É–¥—Ç–æ —Ö–æ–¥–∏—Ç –ø–æ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∫—Ä—É–≥—É:
‚Ä¢ –û–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Å—Å–æ—Ä—ã –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö
‚Ä¢ –î–µ–Ω—å–≥–∏ —É—Ç–µ–∫–∞—é—Ç —Å–∫–≤–æ–∑—å –ø–∞–ª—å—Ü—ã
‚Ä¢ –í—Å—ë –≤—Ä–µ–º—è –ø–æ–ø–∞–¥–∞–µ—à—å –≤ –ø–æ—Ö–æ–∂–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏
‚Ä¢ –í–Ω—É—Ç—Ä–∏ –∂–∏–≤—ë—Ç –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫

–≠—Ç–æ –Ω–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏. –≠—Ç–æ —Ç–≤–æ–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî —Å–ø–æ—Å–æ–±—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Å–∏—Ö–∏–∫–∞ –∫–æ–≥–¥–∞-—Ç–æ –Ω–∞—É—á–∏–ª–∞—Å—å –∑–∞—â–∏—â–∞—Ç—å—Å—è. –û–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–≤–æ–∏ —Ä–µ—à–µ–Ω–∏—è, –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ —Ç–æ, –∫–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å.

–Ø ‚Äî –±–æ—Ç –º–µ—Ç–æ–¥–∞ <b>–°–û–í (–°–∏—Å—Ç–µ–º—ã –û—Å–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ –í—ã–±–æ—Ä–∞)</b>.  
–ó–∞ 20‚Äì24 –≤–æ–ø—Ä–æ—Å–∞ —è –ø–æ–π–º—É —Ç–≤–æ–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –ø–æ–∫–∞–∂—É, –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–≤–æ—é –∂–∏–∑–Ω—å.

<b>–í–∞–∂–Ω–æ:</b> –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏. –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ.

–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å —Å–µ–±—è –≥–ª—É–±–∂–µ? üëÄ"""

keyboard = InlineKeyboardMarkup(inline_keyboard=[
    [InlineKeyboardButton(text="‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É", callback_data="start_diagnostics")],
    [InlineKeyboardButton(text="üìö –û –º–µ—Ç–æ–¥–µ –°–û–í", callback_data="about_method")],
    [InlineKeyboardButton(text="üìÑ –£—Å–ª–æ–≤–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã", callback_data="show_legal")]
    ])

    await message.answer(text, reply_markup=keyboard, parse_mode="HTML")
    await state.clear()
    
@dp.callback_query(lambda c: c.data == "about_method")
async def about_method_callback(callback: CallbackQuery):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ç–æ–¥–µ –°–û–í"""
    text = """<b>üìö –û –º–µ—Ç–æ–¥–µ –°–û–í ‚Äî –°–∏—Å—Ç–µ–º—ã –û—Å–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ –í—ã–±–æ—Ä–∞</b>

–°–û–í ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∏ –±–µ—Ä–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –∂–∏–∑–Ω—å.

üîç <b>–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã?</b>
–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–æ–¥–æ–º –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞. –ö–æ–≥–¥–∞-—Ç–æ –æ–Ω–∏ –ø–æ–º–æ–≥–∞–ª–∏ –≤—ã–∂–∏—Ç—å, –∞ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –º–µ—à–∞—Ç—å –∂–∏—Ç—å.

üéØ <b>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</b>
‚Ä¢ –¢—ã –æ—Ç–≤–µ—á–∞–µ—à—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã ‚Äî —á–µ—Å—Ç–Ω–æ –∏ –Ω–µ –∑–∞–¥—É–º—ã–≤–∞—è—Å—å
‚Ä¢ –ë–æ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–≤–æ–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚Ä¢ –¢—ã –ø–æ–ª—É—á–∞–µ—à—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏ –≤–∏–¥–∏—à—å, —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–≤–æ–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –¥–µ–Ω—å–≥–∏ –∏ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É

<b>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 5‚Äì7 –º–∏–Ω—É—Ç.</b>

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏. –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∏–∂–µ.

–ì–æ—Ç–æ–≤(–∞) –Ω–∞—á–∞—Ç—å? ‚ù§Ô∏è"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É", callback_data="start_diagnostics")],
        [InlineKeyboardButton(text="üìÑ –£—Å–ª–æ–≤–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã", callback_data="show_legal")],
        [InlineKeyboardButton(text="‚óÄÔ∏è –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ])

    await callback.message.edit_text(text, reply_markup=keyboard, parse_mode="HTML")
    await callback.answer()

@dp.callback_query(lambda c: c.data == "show_legal")
async def show_legal(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã"""
    text = """üìÑ <b>–ü—Ä–∞–≤–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b>

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏:

üîπ <a href="https://drive.google.com/file/d/1hNsbGW4igNVqJXjl3tApcbSXrNQiX27K/view?usp=share_link">–ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞</a>
üîπ <a href="https://drive.google.com/file/d/1lP5d-MCBvNpxNBV1hZSCRHByWgFz5LEP/view?usp=sharing">–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a>
üîπ <a href="https://drive.google.com/file/d/1Z3250DPzMun4fuijStmcgIBN8H36-vKy/view?usp=sharing">–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</a>

–ü–æ—Å–ª–µ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è –≤–µ—Ä–Ω–∏—Å—å –∏ –Ω–∞–∂–º–∏ ¬´–ù–∞—á–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É¬ª ‚ù§Ô∏è"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É", callback_data="start_diagnostics")],
        [InlineKeyboardButton(text="‚óÄÔ∏è –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ])

    await callback.message.edit_text(text, reply_markup=keyboard, parse_mode="HTML", disable_web_page_preview=True)
    await callback.answer()

@dp.callback_query(lambda c: c.data == "back_to_main")
async def back_to_main(callback: CallbackQuery, state: FSMContext):
    """–í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    await state.clear()
    await start_handler(callback.message, state)
    await callback.answer()

@dp.callback_query(lambda c: c.data == "start_diagnostics")
async def start_diagnostics_callback(callback: CallbackQuery, state: FSMContext):
    """–≠–∫—Ä–∞–Ω —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"""
    text = """üìã <b>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è</b>

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ —Ç—ã –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è(–ª–∞—Å—å) –∏ —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) —Å —É—Å–ª–æ–≤–∏—è–º–∏:

‚úÖ –Ø –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è(–ª–∞—Å—å) —Å <a href="https://drive.google.com/file/d/1hNsbGW4igNVqJXjl3tApcbSXrNQiX27K/view?usp=share_link">–ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç–æ–π</a>
‚úÖ –Ø –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ <a href="https://drive.google.com/file/d/1lP5d-MCBvNpxNBV1hZSCRHByWgFz5LEP/view?usp=sharing">–æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a>
‚úÖ –Ø —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) –ø–æ–ª—É—á–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

<b>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —Å–≤–æ—ë —Å–æ–≥–ª–∞—Å–∏–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.</b>"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚úÖ –Ø —Å–æ–≥–ª–∞—Å–µ–Ω(–Ω–∞) –∏ —Ö–æ—á—É –Ω–∞—á–∞—Ç—å", callback_data="confirm_consent")],
        [InlineKeyboardButton(text="üìÑ –ï—â—ë —Ä–∞–∑ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã", callback_data="show_legal")],
        [InlineKeyboardButton(text="‚óÄÔ∏è –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="back_to_main")]
    ])

    await callback.message.edit_text(text, reply_markup=keyboard, parse_mode="HTML", disable_web_page_preview=True)
    await callback.answer()

@dp.callback_query(lambda c: c.data == "confirm_consent")
async def confirm_consent(callback: CallbackQuery, state: FSMContext):
    """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è - –Ω–∞—á–∞–ª–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"""
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    await state.update_data(
        consent_given=True,
        scores=[0] * len(PROGRAMS),
        first_stage_answers=[0] * len(FIRST_STAGE_QUESTIONS),
        question_index=0,
        stage="first",
        branch_questions_asked=0,
        final_answers={},
        start_time=datetime.now().isoformat()
    )
    
    await callback.message.edit_text(
        "‚úÖ –°–ø–∞—Å–∏–±–æ! –°–æ–≥–ª–∞—Å–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ.\n\n"
        "–¢–µ–ø–µ—Ä—å –Ω–∞—á–∏–Ω–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É ‚ù§Ô∏è\n\n"
        "–Ø –±—É–¥—É –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –∞ —Ç—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–π. –ó–¥–µ—Å—å –Ω–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî "
        "–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–≤–æ–µ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É.\n\n"
        "–í—Å–µ–≥–æ –±—É–¥–µ—Ç –æ–∫–æ–ª–æ 20 –≤–æ–ø—Ä–æ—Å–æ–≤."
    )
    
    await asyncio.sleep(2)
    
    # –ó–∞–¥–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    await ask_question(callback.message, state)
    await callback.answer()

# ==================== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –û–ü–†–û–°–ê ====================

async def ask_question(message: Message, state: FSMContext):
    data = await state.get_data()
    index = data.get("question_index", 0)
    stage = data.get("stage", "first")
    branch = data.get("current_branch")
    branch_q_asked = data.get("branch_questions_asked", 0)

    logger.info(f"ask_question: stage={stage}, index={index}, branch={branch}")

    if stage == "first" and index >= len(FIRST_STAGE_QUESTIONS):
        await determine_branch(message, state)
        return

    if stage == "branch_tie":
        tie_branches = data.get("tie_branches", ["A", "B"])
        key = f"{tie_branches[0]}_{tie_branches[1]}"
        q_text = BRANCH_TIE_QUESTIONS.get(key) or BRANCH_TIE_QUESTIONS.get(f"{tie_branches[1]}_{tie_branches[0]}")
        if q_text:
            keyboard = InlineKeyboardMarkup(inline_keyboard=[
                [InlineKeyboardButton(text="–í–∞—Ä–∏–∞–Ω—Ç 1", callback_data="tie_branch_1"),
                 InlineKeyboardButton(text="–í–∞—Ä–∏–∞–Ω—Ç 2", callback_data="tie_branch_2")]
            ])
            await message.answer(f"–ß—Ç–æ–±—ã —Ç–æ—á–Ω–µ–µ –ø–æ–Ω—è—Ç—å:\n\n{q_text}", reply_markup=keyboard)
            return
        else:
            await state.update_data(current_branch=tie_branches[0], stage="branch", branch_questions_asked=0)
            await ask_question(message, state)
            return

    if stage == "branch" and branch:
        questions = {
            "A": BRANCH_A_QUESTIONS,
            "B": BRANCH_B_QUESTIONS,
            "C": BRANCH_C_QUESTIONS,
            "D": BRANCH_D_QUESTIONS
        }.get(branch, [])

        if branch_q_asked < len(questions):
            q_text = questions[branch_q_asked]
            callback_prefix = "branch"
        else:
            await ask_final_questions(message, state, 0)
            return

    if stage == "final":
        if index < len(FINAL_QUESTIONS):
            q_text = FINAL_QUESTIONS[index]
            if index == 0:
                keyboard = InlineKeyboardMarkup(inline_keyboard=[
                    [[InlineKeyboardButton(text=str(i), callback_data=f"final_{i}_0")] for i in range(1, 11)]
                ])
            elif index == 1:
                keyboard = InlineKeyboardMarkup(inline_keyboard=[
                    [InlineKeyboardButton(text=opt, callback_data=f"final_freq_{i}")] for i, opt in enumerate(FINAL_FREQUENCY_OPTIONS)
                ])
            else:
                keyboard = InlineKeyboardMarkup(inline_keyboard=[
                    [InlineKeyboardButton(text=opt, callback_data=f"final_sphere_{i}")] for i, opt in enumerate(FINAL_SPHERE_OPTIONS)
                ])
        else:
            await finish_diagnostics(message, state)
            return

    text = f"–í–æ–ø—Ä–æ—Å {get_global_question_number(data, stage, index, branch_q_asked)}:\n\n{q_text}"

    keyboard = keyboard or InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text=str(i), callback_data=f"{callback_prefix}_{i}_{index}")] for i in range(1, 6)
    ])

    await message.answer(text, reply_markup=keyboard)
    
async def _get_global_question_number(state_data, stage, index, branch_questions_asked):
    """–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞"""
    if stage == "first":
        return index + 1
    elif stage == "branch":
        return 10 + branch_questions_asked + 1
    else:  # final
        return 10 + 6 + index + 1


@dp.callback_query(lambda c: c.data.startswith(("first_", "branch_", "final_", "final_option1_", "final_option2_")))
async def process_answer(callback: CallbackQuery, state: FSMContext):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    data = callback.data
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
    if data.startswith("final_option1_"):
        option_index = int(data.split("_")[2])
        await process_final_option(callback, state, 1, option_index)
        return
    elif data.startswith("final_option2_"):
        option_index = int(data.split("_")[2])
        await process_final_option(callback, state, 2, option_index)
        return
    else:
        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å —á–∏—Å–ª–æ–≤–æ–π –æ—Ü–µ–Ω–∫–æ–π
        parts = data.split("_")
        prefix = parts[0]
        score = int(parts[1])
        index = int(parts[2])

        state_data = await state.get_data()
        scores = state_data.get("scores", [0] * len(PROGRAMS))
        current_stage = state_data.get("stage", "first")
        branch = state_data.get("current_branch", None)
        branch_questions_asked = state_data.get("branch_questions_asked", 0)
        question_index = state_data.get("question_index", 0)

        logger.info(f"process_answer: prefix={prefix}, score={score}, index={index}, stage={current_stage}, question_index={question_index}")

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–ø–∞ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç—ã
        if prefix == "first" and current_stage == "first":
            if index < len(FIRST_STAGE_QUESTIONS):
                first_stage_answers = state_data.get("first_stage_answers", [0] * len(FIRST_STAGE_QUESTIONS))
                first_stage_answers[index] = score
                # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–ø–∞
                new_index = index + 1
                await state.update_data(
                    first_stage_answers=first_stage_answers,
                    question_index=new_index
                )
                logger.info(f"–ü–µ—Ä–≤—ã–π —ç—Ç–∞–ø: —Å–æ—Ö—Ä–∞–Ω–µ–Ω –æ—Ç–≤–µ—Ç {score} –Ω–∞ –≤–æ–ø—Ä–æ—Å {index}, –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å {new_index}")

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ —ç—Ç–∞–ø–∞ - –¥–æ–±–∞–≤–ª—è–µ–º –±–∞–ª–ª—ã –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º
        elif prefix == "branch" and current_stage == "branch" and branch:
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫ –∫–∞–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –≤–æ–ø—Ä–æ—Å
            branch_programs = {
                'A': BRANCH_A,
                'B': BRANCH_B,
                'C': BRANCH_C,
                'D': BRANCH_D
            }.get(branch, [])
            
            if branch_questions_asked < len(branch_programs):
                prog_index = branch_programs[branch_questions_asked]
                scores[prog_index] += score
                logger.info(f"–í–µ—Ç–∫–∞ {branch}: –¥–æ–±–∞–≤–ª–µ–Ω–æ {score} –±–∞–ª–ª–æ–≤ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ {PROGRAMS[prog_index]}")
                
                # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¢–û–õ–¨–ö–û —Å—á–µ—Ç—á–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–µ—Ç–∫–∏, –ù–ï —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º question_index
                await state.update_data(
                    scores=scores,
                    branch_questions_asked=branch_questions_asked + 1
                )
                
                # –î–ª—è –≤—Ç–æ—Ä–æ–≥–æ —ç—Ç–∞–ø–∞ question_index –Ω–µ –º–µ–Ω—è–µ–º, –æ–Ω –æ—Å—Ç–∞–µ—Ç—Å—è —Ä–∞–≤–Ω—ã–º 10
                # –≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã ask_question –ø–æ–Ω–∏–º–∞–ª, —á—Ç–æ –º—ã –Ω–∞ –≤—Ç–æ—Ä–æ–º —ç—Ç–∞–ø–µ
            else:
                logger.warning(f"–í–æ–ø—Ä–æ—Å–æ–≤ –≤–µ—Ç–∫–∏ –±–æ–ª—å—à–µ —á–µ–º –ø—Ä–æ–≥—Ä–∞–º–º: {branch_questions_asked} >= {len(branch_programs)}")

        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (—Å —á–∏—Å–ª–æ–≤–æ–π –æ—Ü–µ–Ω–∫–æ–π)
        elif prefix == "final" and current_stage == "final":
            if index < len(FINAL_QUESTIONS):
                final_answers = state_data.get("final_answers", {})
                final_answers[f"q{index}"] = score
                new_index = index + 1
                await state.update_data(
                    final_answers=final_answers,
                    question_index=new_index
                )
                logger.info(f"–§–∏–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å {index}: —Å–æ—Ö—Ä–∞–Ω–µ–Ω –æ—Ç–≤–µ—Ç {score}, –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å {new_index}")

        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É
        await ask_question(callback.message, state)
        await callback.answer()


async def process_final_option(callback: CallbackQuery, state: FSMContext, question_num: int, option_index: int):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏"""
    state_data = await state.get_data()
    current_stage = state_data.get("stage", "final")
    index = state_data.get("question_index", 0)
    
    logger.info(f"process_final_option: question={question_num}, option={option_index}, index={index}")
    
    final_answers = state_data.get("final_answers", {})
    
    if question_num == 1:
        final_answers["frequency"] = option_index
    else:
        final_answers["sphere"] = option_index
    
    new_index = index + 1
    await state.update_data(
        final_answers=final_answers,
        question_index=new_index
    )
    
    await ask_question(callback.message, state)
    await callback.answer()


async def determine_branch(message: Message, state: FSMContext):
    data = await state.get_data()
    first_answers = data.get("first_stage_answers", [0] * len(FIRST_STAGE_QUESTIONS))
    scores = [0] * len(PROGRAMS)

    # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–ª–ª—ã –ø–æ –≤–µ—Ç–∫–∞–º (–ø—Ä–∏–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Äî –ø–æ–¥—Å—Ç—Ä–æ–π –ø–æ–¥ —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã)
    for i, score in enumerate(first_answers):
        if i < 3:  # –≤–æ–ø—Ä–æ—Å—ã 0‚Äì2 ‚Üí A
            for idx in BRANCH_A: scores[idx] += score
        elif i < 6:  # 3‚Äì5 ‚Üí B
            for idx in BRANCH_B: scores[idx] += score
        elif i < 8:  # 6‚Äì7 ‚Üí C
            for idx in BRANCH_C: scores[idx] += score
        else:  # 8‚Äì9 ‚Üí D
            for idx in BRANCH_D: scores[idx] += score

    await state.update_data(scores=scores)

    branch_scores = get_branch_scores(scores)
    top_branches = get_top_branches(branch_scores)

    if len(top_branches) == 1:
        await state.update_data(
            current_branch=top_branches[0],
            stage="branch",
            branch_questions_asked=0
        )
        await ask_question(message, state)
    else:
        await state.update_data(
            tie_branches=top_branches,
            stage="branch_tie"
        )
        await ask_question(message, state)

@dp.callback_query(lambda c: c.data.startswith("tie_branch_"))
async def process_branch_tie(callback: CallbackQuery, state: FSMContext):
    """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å-—Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏"""
    choice = callback.data.split("_")[2]  # "1" –∏–ª–∏ "2"
    
    data = await state.get_data()
    tie_branches = data.get("tie_branches", ['A', 'B'])
    
    # –í—ã–±–∏—Ä–∞–µ–º –≤–µ—Ç–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ç–≤–µ—Ç–∞
    selected_branch = tie_branches[0] if choice == "1" else tie_branches[1]
    
    await state.update_data(
        current_branch=selected_branch,
        stage="branch",
        branch_questions_asked=0,
        question_index=10,  # –§–∏–∫—Å–∏—Ä—É–µ–º –∏–Ω–¥–µ–∫—Å –Ω–∞ 10 –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —ç—Ç–∞–ø–∞
        tie_branches=None
    )
    
    logger.info(f"Tie-breaker: –≤—ã–±—Ä–∞–Ω–∞ –≤–µ—Ç–∫–∞ {selected_branch}")
    await callback.message.edit_text("–°–ø–∞—Å–∏–±–æ! –¢–µ–ø–µ—Ä—å —è –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—é —Ç–≤–æ—é —Å–∏—Ç—É–∞—Ü–∏—é. –ü—Ä–æ–¥–æ–ª–∂–∏–º —Å —É—Ç–æ—á–Ω—è—é—â–∏–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏.")
    await asyncio.sleep(1)
    await ask_question(callback.message, state)
    await callback.answer()


async def ask_final_questions(message: Message, state: FSMContext, question_index: int):
    """–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º"""
    logger.info(f"–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º, –∏–Ω–¥–µ–∫—Å={question_index}")
    await state.update_data(
        stage="final",
        question_index=question_index
    )
    await ask_question(message, state)


async def finish_diagnostics(message: Message, state: FSMContext):
    """–ó–∞–≤–µ—Ä—à–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã"""
    data = await state.get_data()
    scores = data.get("scores", [0] * len(PROGRAMS))
    final_answers = data.get("final_answers", {})

    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ –±–∞–ª–ª–∞–º
    program_scores = list(zip(PROGRAMS, scores, range(len(PROGRAMS))))
    program_scores.sort(key=lambda x: x[1], reverse=True)
    top3 = program_scores[:3]

    logger.info(f"finish_diagnostics: top3={[(p[0], p[1]) for p in top3]}")
    logger.info(f"final_answers={final_answers}")

    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
    text_top = f"""‚ú® <b>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</b> ‚ú®

–¢–≤–æ–∏ —Ç–æ–ø-3 –ø—Ä–æ–≥—Ä–∞–º–º—ã:

1Ô∏è‚É£ <b>{top3[0][0]}</b> ‚Äî {top3[0][1]} –±–∞–ª–ª–æ–≤
2Ô∏è‚É£ <b>{top3[1][0]}</b> ‚Äî {top3[1][1]} –±–∞–ª–ª–æ–≤
3Ô∏è‚É£ <b>{top3[2][0]}</b> ‚Äî {top3[2][1]} –±–∞–ª–ª–æ–≤

–°–µ–π—á–∞—Å –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç —Å–µ–±—è <b>¬´{top3[0][0]}¬ª</b>.

üìå –°–µ–π—á–∞—Å —è –ø—Ä–∏—à–ª—é –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ø—Ä–æ–≥—Ä–∞–º–º."""

    await message.answer(text_top, parse_mode="HTML")

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º (–∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤–∞—à–∏ –æ–ø–∏—Å–∞–Ω–∏—è)
    for i, (prog, score, prog_idx) in enumerate(top3, 1):
        # –í–º–µ—Å—Ç–æ —ç—Ç–æ–π –∑–∞–≥–ª—É—à–∫–∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
        desc = f"–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã {prog}"
        await message.answer(f"<b>{i}. {prog}</b>\n\n{desc}", parse_mode="HTML")
        await asyncio.sleep(0.8)

    text_offer = """–¢—ã —É–∑–Ω–∞–ª(–∞) —Å–µ–±—è –≤ —ç—Ç–∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è—Ö?

<b>–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–π—Ç–∏ –≥–ª—É–±–∂–µ:</b>

üìÑ <b>–ü–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤ —Ñ–∞–π–ª–µ</b>:
   ‚Ä¢ –¢–æ–ø-1 –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚Äî 399‚ÇΩ
   ‚Ä¢ –¢–æ–ø-2 –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî 599‚ÇΩ  
   ‚Ä¢ –¢–æ–ø-3 –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî 799‚ÇΩ

üéØ <b>–ú–∏–Ω–∏-—Ä–∞–∑–±–æ—Ä (30‚Äì40 –º–∏–Ω—É—Ç) ‚Äî 1000‚ÇΩ</b>
üí´ <b>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è (60‚Äì90 –º–∏–Ω—É—Ç) ‚Äî –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 1000‚ÇΩ</b>"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üìÑ –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–±–æ—Ä", callback_data="choose_report")],
        [InlineKeyboardButton(text="üéØ –ú–∏–Ω–∏-—Ä–∞–∑–±–æ—Ä", callback_data="book_mini")],
        [InlineKeyboardButton(text="üí´ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", callback_data="book_consult")],
        [InlineKeyboardButton(text="üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑", callback_data="restart")]
    ])

    await message.answer(text_offer, reply_markup=keyboard, parse_mode="HTML")
    await state.clear()

# ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ó–ê–ü–ò–°–ò –ò –û–ü–õ–ê–¢–´ ====================
@dp.callback_query(lambda c: c.data == "book_consult")
async def book_consult_callback(callback: CallbackQuery, state: FSMContext):
    await state.update_data(service_type="consult", service_name="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è", service_price=6000, prepaid_only=False)
    await state.set_state(Form.waiting_for_name)
    await callback.message.edit_text("üí´ –ó–∞–ø–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é\n\n–ù–∞–ø–∏—à–∏ —Å–≤–æ—ë –∏–º—è:")
    await callback.answer()

@dp.callback_query(lambda c: c.data == "book_mini")
async def book_mini_callback(callback: CallbackQuery, state: FSMContext):
    await state.update_data(service_type="mini", service_name="–ú–∏–Ω–∏-—Ä–∞–∑–±–æ—Ä", service_price=1000, prepaid_only=True)
    await state.set_state(Form.waiting_for_name)
    await callback.message.edit_text("üéØ –ó–∞–ø–∏—Å—å –Ω–∞ –º–∏–Ω–∏-—Ä–∞–∑–±–æ—Ä\n\n–ù–∞–ø–∏—à–∏ —Å–≤–æ—ë –∏–º—è:")
    await callback.answer()

@dp.callback_query(lambda c: c.data == "choose_report")
async def choose_report_callback(callback: CallbackQuery, state: FSMContext):
    text = """üìÑ –í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç —Ä–∞–∑–±–æ—Ä–∞:
‚Ä¢ –¢–æ–ø-1 ‚Äî 399‚ÇΩ
‚Ä¢ –¢–æ–ø-2 ‚Äî 599‚ÇΩ
‚Ä¢ –¢–æ–ø-3 ‚Äî 799‚ÇΩ"""
    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="–¢–æ–ø-1 ‚Äî 399‚ÇΩ", callback_data="report_1")],
        [InlineKeyboardButton(text="–¢–æ–ø-2 ‚Äî 599‚ÇΩ", callback_data="report_2")],
        [InlineKeyboardButton(text="–¢–æ–ø-3 ‚Äî 799‚ÇΩ", callback_data="report_3")],
        [InlineKeyboardButton(text="–ù–∞–∑–∞–¥", callback_data="back_to_main")]
    ])
    await callback.message.edit_text(text, reply_markup=keyboard)
    await callback.answer()

@dp.callback_query(lambda c: c.data.startswith("report_"))
async def process_report_choice(callback: CallbackQuery, state: FSMContext):
    report_type = callback.data.split("_")[1]
    prices = {"1": 399, "2": 599, "3": 799}
    descriptions = {"1": "–¢–æ–ø-1", "2": "–¢–æ–ø-2", "3": "–¢–æ–ø-3"}

    await state.update_data(
        service_type="report",
        report_type=report_type,
        service_price=prices[report_type],
        service_name=f"–†–∞–∑–±–æ—Ä {descriptions[report_type]}"
    )

    await state.set_state(Form.waiting_for_email)
    await callback.message.edit_text(
        f"–í—ã–±—Ä–∞–Ω–æ: {descriptions[report_type]} ‚Äî {prices[report_type]}‚ÇΩ\n\n–£–∫–∞–∂–∏ email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞:"
    )
    await callback.answer()

@dp.message(Form.waiting_for_name)
async def process_name(message: Message, state: FSMContext):
    name = message.text.strip()
    if len(name) < 2:
        await message.answer("–ò–º—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑:")
        return
    await state.update_data(client_name=name)
    await state.set_state(Form.waiting_for_phone)
    await message.answer("–¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: +79991234567):")

@dp.message(Form.waiting_for_phone)
async def process_phone(message: Message, state: FSMContext):
    phone = message.text.strip()
    phone_pattern = re.compile(r'^(\+7|8)?[\s\-]?\(?\d{3}\)?[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}$')
    if not phone_pattern.match(phone.replace(' ', '').replace('-', '')):
        await message.answer("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:")
        return
    await state.update_data(client_phone=phone)
    await state.set_state(Form.waiting_for_date)
    await message.answer("üìÖ –í—ã–±–µ—Ä–∏ —É–¥–æ–±–Ω—É—é –¥–∞—Ç—É:", reply_markup=await SimpleCalendar().start_calendar())

@dp.callback_query(SimpleCalendarCallback.filter(), Form.waiting_for_date)
async def process_date(callback: CallbackQuery, callback_data: SimpleCalendarCallback, state: FSMContext):
    calendar = SimpleCalendar()
    selected, date = await calendar.process_selection(callback, callback_data)
    if selected:
        if date.date() < datetime.now().date():
            await callback.message.answer("–ù–µ–ª—å–∑—è –≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –≤ –ø—Ä–æ—à–ª–æ–º. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞:", reply_markup=await SimpleCalendar().start_calendar())
            await callback.answer()
            return
        await state.update_data(consult_date=date.strftime("%d.%m.%Y"))
        await state.set_state(Form.waiting_for_time)

        data = await state.get_data()
        service_type = data.get("service_type")

        if service_type == "mini":
            time_slots = [["11:00", "12:00", "13:00"], ["14:00", "15:00", "16:00"], ["17:00", "18:00"]]
            time_text = "—Å —à–∞–≥–æ–º 1 —á–∞—Å"
        else:
            time_slots = [["11:00", "13:00", "15:00"], ["17:00"]]
            time_text = "—Å —à–∞–≥–æ–º 2 —á–∞—Å–∞"

        text = f"–î–∞—Ç–∞: {date.strftime('%d.%m.%Y')}\n\n–í—ã–±–µ—Ä–∏ –≤—Ä–µ–º—è ({time_text}):"
        time_keyboard = InlineKeyboardMarkup(inline_keyboard=[])
        for row in time_slots:
            row_buttons = [InlineKeyboardButton(text=t, callback_data=f"time_{t.replace(':', '')}") for t in row]
            time_keyboard.inline_keyboard.append(row_buttons)
        time_keyboard.inline_keyboard.append([InlineKeyboardButton(text="–ù–∞–∑–∞–¥ –∫ –¥–∞—Ç–µ", callback_data="back_to_date")])

        await callback.message.edit_text(text, reply_markup=time_keyboard)
    await callback.answer()

@dp.callback_query(lambda c: c.data == "back_to_date", Form.waiting_for_time)
async def back_to_date(callback: CallbackQuery, state: FSMContext):
    await state.set_state(Form.waiting_for_date)
    await callback.message.edit_text("üìÖ –í—ã–±–µ—Ä–∏ –¥–∞—Ç—É:", reply_markup=await SimpleCalendar().start_calendar())
    await callback.answer()

@dp.callback_query(lambda c: c.data.startswith("time_"), Form.waiting_for_time)
async def process_time(callback: CallbackQuery, state: FSMContext):
    time_code = callback.data.split("_")[1]
    selected_time = f"{time_code[:2]}:{time_code[2:]}" if len(time_code) == 4 else f"{time_code[:2]}:00"
    
    data = await state.get_data()
    text = f"""‚úÖ <b>–î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø–∏—Å–∏:</b>

üë§ –ò–º—è: {data.get('client_name')}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: {data.get('client_phone')}
üìÖ –î–∞—Ç–∞: {data.get('consult_date')}
üïê –í—Ä–µ–º—è: {selected_time} –ú–°–ö
üéØ –£—Å–ª—É–≥–∞: {data.get('service_name')}

{f'üí∞ –°—É–º–º–∞: 1000‚ÇΩ' if data.get('prepaid_only') else 'üí∞ –ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞: 1000‚ÇΩ'}

–í—Å—ë –≤–µ—Ä–Ω–æ?"""

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ", callback_data="proceed_to_payment")],
        [InlineKeyboardButton(text="üîÑ –ò–∑–º–µ–Ω–∏—Ç—å", callback_data="back_to_booking_start")],
        [InlineKeyboardButton(text="‚óÄÔ∏è –í –º–µ–Ω—é", callback_data="back_to_main")]
    ])

    await state.update_data(consult_time=selected_time)
    await callback.message.edit_text(text, reply_markup=keyboard, parse_mode="HTML")
    await callback.answer()

@dp.callback_query(lambda c: c.data == "back_to_booking_start")
async def back_to_booking_start(callback: CallbackQuery, state: FSMContext):
    data = await state.get_data()
    if data.get("service_type") == "mini":
        await book_mini_callback(callback, state)
    else:
        await book_consult_callback(callback, state)

@dp.callback_query(lambda c: c.data == "proceed_to_payment")
async def proceed_to_payment(callback: CallbackQuery, state: FSMContext):
    if not PAYMENTS_TOKEN:
        await callback.message.answer("‚ùå –û–ø–ª–∞—Ç–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.")
        await callback.answer()
        return
    
    data = await state.get_data()
    payment_id = ''.join(random.choices(string.ascii_uppercase + string.digits, k=10))
    await state.update_data(payment_id=payment_id)
    
    price = data.get("service_price", 1000)
    name = data.get("service_name", "–£—Å–ª—É–≥–∞")
    
    await bot.send_invoice(
        chat_id=callback.message.chat.id,
        title=name,
        description=f"–ó–∞–ø–∏—Å—å –Ω–∞ {name.lower()}",
        payload=payment_id,
        provider_token=PAYMENTS_TOKEN,
        currency="rub",
        prices=[LabeledPrice(label=name, amount=price * 100)],
        start_parameter="booking"
    )
    
    await state.set_state(Form.waiting_for_payment)
    await callback.answer()

@dp.pre_checkout_query()
async def pre_checkout_handler(pre_checkout_query: PreCheckoutQuery, state: FSMContext):
    await bot.answer_pre_checkout_query(pre_checkout_query.id, ok=True)

@dp.message(lambda message: message.successful_payment is not None)
async def successful_payment_handler(message: Message, state: FSMContext):
    payment_info = message.successful_payment
    data = await state.get_data()
    
    client_name = data.get("client_name", "–ù–µ —É–∫–∞–∑–∞–Ω–æ")
    service_name = data.get("service_name", "–£—Å–ª—É–≥–∞")
    amount = payment_info.total_amount / 100
    
    await message.answer(f"‚úÖ –û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞! –°–ø–∞—Å–∏–±–æ, {client_name}! ‚ù§Ô∏è")
    
    admin_text = f"""üí∞ –ù–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞!
üë§ {client_name}
üéØ {service_name}
üíµ {amount}‚ÇΩ"""
    
    try:
        await bot.send_message(ADMIN_ID, admin_text)
    except:
        pass
    
    await state.clear()
    await start_handler(message, state)

@dp.callback_query(lambda c: c.data == "restart")
async def restart_callback(callback: CallbackQuery, state: FSMContext):
    """–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"""
    await state.clear()
    await start_handler(callback.message, state)
    await callback.answer()

# ==================== WEBHOOK ====================
async def on_startup(bot: Bot):
    webhook_url = f"{os.getenv('WEBHOOK_URL')}/webhook"
    secret = os.getenv("WEBHOOK_SECRET", "secret")
    await bot.set_webhook(url=webhook_url, secret_token=secret)
    logger.info(f"Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: {webhook_url}")

async def on_shutdown(bot: Bot):
    await bot.delete_webhook(drop_pending_updates=True)
    logger.info("Webhook —É–¥–∞–ª—ë–Ω")

async def main():
    dp.startup.register(on_startup)
    dp.shutdown.register(on_shutdown)

    app = web.Application()
    webhook_handler = SimpleRequestHandler(dp, bot, secret_token=os.getenv("WEBHOOK_SECRET", "secret"))
    webhook_handler.register(app, path="/webhook")
    setup_application(app, dp, bot=bot)

    runner = web.AppRunner(app)
    await runner.setup()
    site = web.TCPSite(runner, "0.0.0.0", int(os.getenv("PORT", 8080)))
    await site.start()

    logger.info("–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω")
    await asyncio.Event().wait()

if __name__ == "__main__":
    asyncio.run(main())
